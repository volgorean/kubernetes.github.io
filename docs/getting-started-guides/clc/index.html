

<!Doctype html>
<html id="docs" class="Guides">


<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="canonical" href="http://kubernetes.io/docs/getting-started-guides/clc/" />
	<link rel="shortcut icon" type="image/png" href="/images/favicon.png">
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href='https://fonts.googleapis.com/css?family=Roboto+Mono' type='text/css'>
	<link rel="stylesheet" href="/css/styles.css"/>
        <link rel="stylesheet" href="/css/jquery-ui.min.css">
        <link rel="stylesheet" href="/css/sweetalert.css">
	<script src="/js/jquery-2.2.0.min.js"></script>
        <script src="/js/jquery-ui.min.js"></script>
	<script src="/js/script.js"></script>
        <script src="/js/sweetalert.min.js"></script>
	<title>Kubernetes - Running Kubernetes on CenturyLink Cloud</title>
</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>
<header>
	<a href="/" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="/docs/" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a>
		<a href="/docs/hellonode/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
		<button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="/docs/hellonode/">Get Started</a></h3>
				<p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
			</div>
			<div class="nav-box">
				<h3><a href="/docs/">Documentation</a></h3>
				<p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
			</div>
			<div class="nav-box">
				<h3><a href="/community/">Community</a></h3>
				<p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
			</div>
			<div class="nav-box">
				<h3><a href="http://blog.kubernetes.io">Blog</a></h3>
				<p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
			</div>
		</main>
		<main data-auto-burger="primary">
			<div class="left">
				<h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
				<a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
			</div>

			<div class="right">
				<h5 class="github-invite">Explore the community</h5>
				<div class="social">
					<a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
					<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
					<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
					<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
					<a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
					<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
				</div>
			</div>
			<div class="clear" style="clear: both"></div>
		</main>
	</nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
	<h1>Guides</h1>
	<h5>How to get started, and achieve tasks, using Kubernetes</h5>
	<div id="vendorStrip" class="light-text">
		<ul>
			<li><a href="/docs/" class="YAH">GUIDES</a></li>
			<li><a href="/docs/reference" >REFERENCE</a></li>
			<li><a href="/docs/samples" >SAMPLES</a></li>
			<li><a href="/docs/troubleshooting/" >SUPPORT</a></li>
		</ul>
		<div id="searchBox">
			<input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
		</div>
	</div>
</section>

<section id="encyclopedia">
	<div id="docsToc">
        <div class="pi-accordion">
        
    <a class="item" data-title="Guides" href="/docs/"></a>
<div class="item" data-title="Getting Started">
  <div class="container">
    <a class="item" data-title="What is Kubernetes?" href="/docs/whatisk8s/"></a>
    <a class="item" data-title="Downloading or Building Kubernetes" href="/docs/getting-started-guides/binary_release/"></a>
    <a class="item" data-title="Hello World Walkthrough" href="/docs/hellonode/"></a>
    <a class="item" data-title="Online Training Course" href="https://www.udacity.com/course/scalable-microservices-with-kubernetes--ud615" target='_blank'></a>
  </div>
</div>
<div class="item" data-title="Accessing the Cluster">
  <div class="container">
    <a class="item" data-title="Installing and Setting up kubectl" href="/docs/user-guide/prereqs/"></a>
    <a class="item" data-title="Accessing Clusters" href="/docs/user-guide/accessing-the-cluster/"></a>
    <a class="item" data-title="Sharing Cluster Access with kubeconfig" href="/docs/user-guide/sharing-clusters/"></a>
    <a class="item" data-title="Authenticating Across Clusters with kubeconfig" href="/docs/user-guide/kubeconfig-file/"></a>
  </div>
</div>
    <a class="item" data-title="User Guide" href="/docs/user-guide/"></a>
    <a class="item" data-title="Web UI (Dashboard)" href="/docs/user-guide/ui/"></a>
<div class="item" data-title="Workload Deployment and Management">
  <div class="container">
    <a class="item" data-title="Launching, Exposing, and Killing Applications" href="/docs/user-guide/quick-start/"></a>
    <a class="item" data-title="Deploying Applications" href="/docs/user-guide/deploying-applications/"></a>
    <a class="item" data-title="Managing Resources" href="/docs/user-guide/managing-deployments/"></a>
    <a class="item" data-title="Replication Controller Operations" href="/docs/user-guide/replication-controller/operations/"></a>
    <a class="item" data-title="Resizing a Replication Controller" href="/docs/user-guide/resizing-a-replication-controller/"></a>
    <a class="item" data-title="Rolling Updates" href="/docs/user-guide/rolling-updates/"></a>
    <a class="item" data-title="Rolling Update Demo" href="/docs/user-guide/update-demo/"></a>
    <a class="item" data-title="Secrets Walkthrough" href="/docs/user-guide/secrets/walkthrough/"></a>
    <a class="item" data-title="Using ConfigMap" href="/docs/user-guide/configmap/"></a>
    <a class="item" data-title="Horizontal Pod Autoscaling" href="/docs/user-guide/horizontal-pod-autoscaling/walkthrough/"></a>
    <a class="item" data-title="Best Practices for Configuration" href="/docs/user-guide/config-best-practices/"></a>
    <a class="item" data-title="Using kubectl to Manage Resources" href="/docs/user-guide/working-with-resources/"></a>
    <a class="item" data-title="Garbage collection" href="/docs/user-guide/garbage-collector/"></a>
  </div>
</div>
<div class="item" data-title="Batch Jobs">
  <div class="container">
    <a class="item" data-title="Jobs" href="/docs/user-guide/jobs/"></a>
    <a class="item" data-title="Parallel Processing using Expansions" href="/docs/user-guide/jobs/expansions/"></a>
    <a class="item" data-title="Coarse Parallel Processing using a Work Queue" href="/docs/user-guide/jobs/work-queue-1/"></a>
    <a class="item" data-title="Fine Parallel Processing using a Work Queue" href="/docs/user-guide/jobs/work-queue-2/"></a>
  </div>
</div>
<div class="item" data-title="Service Discovery and Load Balancing">
  <div class="container">
    <a class="item" data-title="Connecting Applications with Services" href="/docs/user-guide/connecting-applications/"></a>
    <a class="item" data-title="Service Operations" href="/docs/user-guide/services/operations/"></a>
    <a class="item" data-title="Creating an External Load Balancer" href="/docs/user-guide/load-balancer/"></a>
    <a class="item" data-title="Configuring Your Cloud Provider's Firewalls" href="/docs/user-guide/services-firewalls/"></a>
    <a class="item" data-title="Cross-cluster Service Discovery using Federated Services" href="/docs/user-guide/federation/federated-services/"></a>
  </div>
</div>
<div class="item" data-title="Containers and Pods">
  <div class="container">
    <a class="item" data-title="Running Your First Containers" href="/docs/user-guide/simple-nginx/"></a>
    <a class="item" data-title="Creating Single-Container Pods" href="/docs/user-guide/pods/single-container/"></a>
    <a class="item" data-title="Creating Multi-Container Pods" href="/docs/user-guide/pods/multi-container/"></a>
    <a class="item" data-title="Configuring Containers" href="/docs/user-guide/configuring-containers/"></a>
    <a class="item" data-title="Working with Containers in Production" href="/docs/user-guide/production-pods/"></a>
    <a class="item" data-title="Commands and Capabilities" href="/docs/user-guide/containers/"></a>
    <a class="item" data-title="Using Environment Variables" href="/docs/user-guide/environment-guide/"></a>
    <a class="item" data-title="Managing Compute Resources" href="/docs/user-guide/compute-resources/"></a>
    <a class="item" data-title="The Lifecycle of a Pod" href="/docs/user-guide/pod-states/"></a>
    <a class="item" data-title="Checking Pod Health" href="/docs/user-guide/liveness/"></a>
    <a class="item" data-title="Container Lifecycle Hooks" href="/docs/user-guide/container-environment/"></a>
    <a class="item" data-title="Assigning Pods to Nodes" href="/docs/user-guide/node-selection/"></a>
    <a class="item" data-title="Using the Downward API to Convey Pod Properties" href="/docs/user-guide/downward-api/"></a>
    <a class="item" data-title="Downward API Volumes" href="/docs/user-guide/downward-api/volume"></a>
    <a class="item" data-title="Persistent Volumes Walkthrough" href="/docs/user-guide/persistent-volumes/walkthrough/"></a>
    <a class="item" data-title="Bootstrapping Pet Sets" href="/docs/user-guide/petset/bootstrapping/"></a>
  </div>
</div>
<div class="item" data-title="Monitoring, Logging, and Debugging Containers">
  <div class="container">
    <a class="item" data-title="Resource Usage Monitoring" href="/docs/user-guide/monitoring/"></a>
    <a class="item" data-title="Logging" href="/docs/getting-started-guides/logging/"></a>
    <a class="item" data-title="Logging with Elasticsearch and Kibana" href="/docs/getting-started-guides/logging-elasticsearch/"></a>
    <a class="item" data-title="Running Commands in a Container with kubectl exec" href="/docs/user-guide/getting-into-containers/"></a>
    <a class="item" data-title="Connect with Proxies" href="/docs/user-guide/connecting-to-applications-proxy/"></a>
    <a class="item" data-title="Connect with Port Forwarding" href="/docs/user-guide/connecting-to-applications-port-forward/"></a>
    <a class="item" data-title="Using Explorer to Examine the Runtime Environment" href="https://github.com/kubernetes/kubernetes/tree/release-1.3/examples/explorer" target='_blank'></a>
  </div>
</div>
<div class="item" data-title="Creating a Cluster">
  <div class="container">
    <a class="item" data-title="Picking the Right Solution" href="/docs/getting-started-guides/"></a>
<div class="item" data-title="Running Kubernetes on Your Local Machine">
  <div class="container">
    <a class="item" data-title="Running Kubernetes Locally via Minikube" href="/docs/getting-started-guides/minikube/"></a>
    <a class="item" data-title="Deprecated Alternatives" href="/docs/getting-started-guides/alternatives/"></a>
  </div>
</div>
<div class="item" data-title="Running Kubernetes on Turn-key Cloud Solutions">
  <div class="container">
    <a class="item" data-title="Running Kubernetes on Google Container Engine" href="https://cloud.google.com/container-engine/docs/before-you-begin/" target='_blank'></a>
    <a class="item" data-title="Running Kubernetes on Google Compute Engine" href="/docs/getting-started-guides/gce/"></a>
    <a class="item" data-title="Running Kubernetes on AWS EC2" href="/docs/getting-started-guides/aws/"></a>
    <a class="item" data-title="Running Kubernetes on Azure (Weave-based)" href="/docs/getting-started-guides/coreos/azure/"></a>
    <a class="item" data-title="Running Kubernetes on Azure (Flannel-based)" href="/docs/getting-started-guides/azure/"></a>
    <a class="item" data-title="Running Kubernetes on CenturyLink Cloud" href="/docs/getting-started-guides/clc/"></a>
  </div>
</div>
<div class="item" data-title="Running Kubernetes on Custom Solutions">
  <div class="container">
    <a class="item" data-title="Creating a Custom Cluster from Scratch" href="/docs/getting-started-guides/scratch/"></a>
<div class="item" data-title="Custom Cloud Solutions">
  <div class="container">
    <a class="item" data-title="CoreOS on AWS or GCE" href="/docs/getting-started-guides/coreos/"></a>
    <a class="item" data-title="Ubuntu on AWS or Joyent" href="/docs/getting-started-guides/juju/"></a>
    <a class="item" data-title="CoreOS on Rackspace" href="/docs/getting-started-guides/rackspace/"></a>
  </div>
</div>
<div class="item" data-title="On-Premise VMs">
  <div class="container">
    <a class="item" data-title="CoreOS on Vagrant" href="/docs/getting-started-guides/coreos/"></a>
    <a class="item" data-title="Cloudstack" href="/docs/getting-started-guides/cloudstack/"></a>
    <a class="item" data-title="VMware vSphere" href="/docs/getting-started-guides/vsphere/"></a>
    <a class="item" data-title="VMware Photon Controller" href="/docs/getting-started-guides/photon-controller/"></a>
    <a class="item" data-title="Juju" href="/docs/getting-started-guides/juju/"></a>
    <a class="item" data-title="DCOS" href="/docs/getting-started-guides/dcos/"></a>
    <a class="item" data-title="CoreOS on libvirt" href="/docs/getting-started-guides/libvirt-coreos/"></a>
    <a class="item" data-title="oVirt" href="/docs/getting-started-guides/ovirt/"></a>
    <a class="item" data-title="OpenStack Heat" href="/docs/getting-started-guides/openstack-heat/"></a>
    <a class="item" data-title="CoreOS on Multinode Cluster" href="/docs/getting-started-guides/coreos/coreos_multinode_cluster/"></a>
    <a class="item" data-title="Fedora With Calico Networking" href="/docs/getting-started-guides/fedora/fedora-calico/"></a>
<div class="item" data-title="rkt">
  <div class="container">
    <a class="item" data-title="Running Kubernetes with rkt" href="/docs/getting-started-guides/rkt/"></a>
    <a class="item" data-title="Known Issues when Using rkt" href="/docs/getting-started-guides/rkt/notes/"></a>
  </div>
</div>
    <a class="item" data-title="Kubernetes on Mesos" href="/docs/getting-started-guides/mesos/"></a>
    <a class="item" data-title="Kubernetes on Mesos on Docker" href="/docs/getting-started-guides/mesos-docker/"></a>
  </div>
</div>
<div class="item" data-title="Bare Metal">
  <div class="container">
    <a class="item" data-title="Offline" href="/docs/getting-started-guides/coreos/bare_metal_offline/"></a>
    <a class="item" data-title="Fedora via Ansible" href="/docs/getting-started-guides/fedora/fedora_ansible_config/"></a>
    <a class="item" data-title="Fedora (Single Node)" href="/docs/getting-started-guides/fedora/fedora_manual_config/"></a>
    <a class="item" data-title="Fedora (Multi Node)" href="/docs/getting-started-guides/fedora/flannel_multi_node_cluster/"></a>
    <a class="item" data-title="CentOS" href="/docs/getting-started-guides/centos/centos_manual_config/"></a>
    <a class="item" data-title="CoreOS" href="/docs/getting-started-guides/coreos"></a>
    <a class="item" data-title="CoreOS with Calico" href="/docs/getting-started-guides/coreos/bare_metal_calico/"></a>
    <a class="item" data-title="Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    <a class="item" data-title="Ubuntu Nodes with Calico" href="/docs/getting-started-guides/ubuntu-calico/"></a>
  </div>
</div>
  </div>
</div>
    <a class="item" data-title="Portable Multi-Node Cluster" href="/docs/getting-started-guides/docker-multinode/"></a>
    <a class="item" data-title="Building Large Clusters" href="/docs/admin/cluster-large/"></a>
    <a class="item" data-title="Running in Multiple Zones" href="/docs/admin/multiple-zones/"></a>
    <a class="item" data-title="Building High-Availability Clusters" href="/docs/admin/high-availability/"></a>
  </div>
</div>
<div class="item" data-title="Administering Clusters">
  <div class="container">
    <a class="item" data-title="Admin Guide" href="/docs/admin/"></a>
    <a class="item" data-title="Cluster Management Guide" href="/docs/admin/cluster-management/"></a>
    <a class="item" data-title="Sharing a Cluster with Namespaces" href="/docs/admin/namespaces/"></a>
    <a class="item" data-title="Namespaces Walkthrough" href="/docs/admin/namespaces/walkthrough/"></a>
    <a class="item" data-title="Setting Pod CPU and Memory Limits" href="/docs/admin/limitrange/"></a>
    <a class="item" data-title="Understanding Resource Quotas" href="/docs/admin/resourcequota/"></a>
    <a class="item" data-title="Applying Resource Quotas and Limits" href="/docs/admin/resourcequota/walkthrough/"></a>
    <a class="item" data-title="Kubernetes Components" href="/docs/admin/cluster-components/"></a>
    <a class="item" data-title="Configuring Kubernetes Use of etcd" href="/docs/admin/etcd/"></a>
    <a class="item" data-title="Federating Clusters" href="/docs/admin/federation/"></a>
    <a class="item" data-title="Using Multiple Clusters" href="/docs/admin/multi-cluster/"></a>
    <a class="item" data-title="Changing Cluster Size" href="https://github.com/kubernetes/kubernetes/wiki/User-FAQ#how-do-i-change-the-size-of-my-cluster/" target='_blank'></a>
    <a class="item" data-title="Configuring Multiple Schedulers" href="/docs/admin/multiple-schedulers/"></a>
    <a class="item" data-title="Networking in Kubernetes" href="/docs/admin/networking/"></a>
    <a class="item" data-title="Using DNS Pods and Services" href="/docs/admin/dns/"></a>
    <a class="item" data-title="Setting Up and Configuring DNS" href="https://github.com/kubernetes/kubernetes/tree/release-1.3/examples/cluster-dns" target='_blank'></a>
    <a class="item" data-title="Master <-> Node Communication" href="/docs/admin/master-node-communication/"></a>
    <a class="item" data-title="Network Plugins" href="/docs/admin/network-plugins/"></a>
    <a class="item" data-title="Static Pods" href="/docs/admin/static-pods/"></a>
    <a class="item" data-title="Configuring kubelet Garbage Collection" href="/docs/admin/garbage-collection/"></a>
    <a class="item" data-title="Configuring Out Of Resource Handling" href="/docs/admin/out-of-resource/"></a>
    <a class="item" data-title="Configuring Kubernetes with Salt" href="/docs/admin/salt/"></a>
    <a class="item" data-title="Monitoring Node Health" href="/docs/admin/node-problem/"></a>
  </div>
</div>
        </div> <!-- /pi-accordion -->
		<button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
	</div> <!-- /docsToc -->
	<div id="docsContent">
        <p><a href="/editdocs#docs/getting-started-guides/clc.md" id="editPageButton">Edit This Page</a></p>
    	<h1>Running Kubernetes on CenturyLink Cloud</h1>
		<ul id="markdown-toc">
  <li><a href="#find-help" id="markdown-toc-find-help">Find Help</a></li>
  <li><a href="#clusters-of-vms-or-physical-servers-your-choice" id="markdown-toc-clusters-of-vms-or-physical-servers-your-choice">Clusters of VMs or Physical Servers, your choice.</a></li>
  <li><a href="#requirements" id="markdown-toc-requirements">Requirements</a></li>
  <li><a href="#script-installation" id="markdown-toc-script-installation">Script Installation</a>    <ul>
      <li><a href="#script-installation-example-ubuntu-14-walkthrough" id="markdown-toc-script-installation-example-ubuntu-14-walkthrough">Script Installation Example: Ubuntu 14 Walkthrough</a></li>
    </ul>
  </li>
  <li><a href="#cluster-creation" id="markdown-toc-cluster-creation">Cluster Creation</a>    <ul>
      <li><a href="#cluster-creation-script-options" id="markdown-toc-cluster-creation-script-options">Cluster Creation: Script Options</a></li>
    </ul>
  </li>
  <li><a href="#cluster-expansion" id="markdown-toc-cluster-expansion">Cluster Expansion</a>    <ul>
      <li><a href="#cluster-expansion-script-options" id="markdown-toc-cluster-expansion-script-options">Cluster Expansion: Script Options</a></li>
    </ul>
  </li>
  <li><a href="#cluster-deletion" id="markdown-toc-cluster-deletion">Cluster Deletion</a></li>
  <li><a href="#examples" id="markdown-toc-examples">Examples</a></li>
  <li><a href="#cluster-features-and-architecture" id="markdown-toc-cluster-features-and-architecture">Cluster Features and Architecture</a></li>
  <li><a href="#optional-add-ons" id="markdown-toc-optional-add-ons">Optional add-ons</a></li>
  <li><a href="#cluster-management" id="markdown-toc-cluster-management">Cluster management</a>    <ul>
      <li><a href="#accessing-the-cluster-programmatically" id="markdown-toc-accessing-the-cluster-programmatically">Accessing the cluster programmatically</a></li>
      <li><a href="#accessing-the-cluster-with-a-browser" id="markdown-toc-accessing-the-cluster-with-a-browser">Accessing the cluster with a browser</a></li>
      <li><a href="#configuration-files" id="markdown-toc-configuration-files">Configuration files</a></li>
    </ul>
  </li>
  <li><a href="#kubectl-usage-examples" id="markdown-toc-kubectl-usage-examples"><code class="highlighter-rouge">kubectl</code> usage examples</a></li>
  <li><a href="#what-kubernetes-features-do-not-work-on-centurylink-cloud" id="markdown-toc-what-kubernetes-features-do-not-work-on-centurylink-cloud">What Kubernetes features do not work on CenturyLink Cloud</a></li>
  <li><a href="#ansible-files" id="markdown-toc-ansible-files">Ansible Files</a></li>
  <li><a href="#further-reading" id="markdown-toc-further-reading">Further reading</a></li>
</ul>

<p>These scripts handle the creation, deletion and expansion of kubernetes clusters on CenturyLink Cloud.</p>

<p>You can accomplish all these tasks with a single command. We have made the Ansible playbooks used to perform these tasks available <a href="https://github.com/CenturyLinkCloud/adm-kubernetes-on-clc/blob/master/ansible/README.md">here</a>.</p>

<h2 id="find-help">Find Help</h2>

<p>If you run into any problems or want help with anything, we are here to help. Reach out to use via any of the following ways:
- Submit a github issue
- Send an email to kubernetes AT ctl DOT io
- Visit http://info.ctl.io/kubernetes</p>

<h2 id="clusters-of-vms-or-physical-servers-your-choice">Clusters of VMs or Physical Servers, your choice.</h2>

<ul>
  <li>We support Kubernetes clusters on both Virtual Machines or Physical Servers. If you want to use physical servers for the worker nodes (minions), simple use the –minion_type=bareMetal flag.</li>
  <li>For more information on physical servers, visit: <a href="https://www.ctl.io/bare-metal/">https://www.ctl.io/bare-metal/</a>)</li>
  <li>Physical serves are only available in the VA1 and GB3 data centers.</li>
  <li>VMs are available in all 13 of our public cloud locations</li>
</ul>

<h2 id="requirements">Requirements</h2>

<p>The requirements to run this script are:
- A linux administrative host (tested on ubuntu and OSX)
- python 2 (tested on 2.7.11)
  - pip (installed with python as of 2.7.9)
- git
- A CenturyLink Cloud account with rights to create new hosts
- An active VPN connection to the CenturyLink Cloud from your linux host</p>

<h2 id="script-installation">Script Installation</h2>

<p>After you have all the requirements met, please follow these instructions to install this script.</p>

<p>1) Clone this repository and cd into it.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>git clone https://github.com/CenturyLinkCloud/adm-kubernetes-on-clc
</code></pre>
</div>

<p>2) Install all requirements, including
  * Ansible
  * CenturyLink Cloud SDK
  * Ansible Modules</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>sudo pip install -r ansible/requirements.txt
</code></pre>
</div>

<p>3) Create the credentials file from the template and use it to set your ENV variables</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>cp ansible/credentials.sh.template ansible/credentials.sh
vi ansible/credentials.sh
<span class="nb">source </span>ansible/credentials.sh

</code></pre>
</div>

<p>4) Grant your machine access to the CenturyLink Cloud network by using a VM inside the network or <a href="https://www.ctl.io/knowledge-base/network/how-to-configure-client-vpn/"> configuring a VPN connection to the CenturyLink Cloud network.</a></p>

<h4 id="script-installation-example-ubuntu-14-walkthrough">Script Installation Example: Ubuntu 14 Walkthrough</h4>

<p>If you use an ubuntu 14, for your convenience we have provided a step by step
guide to install the requirements and install the script.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="c"># system</span>
  apt-get update
  apt-get install -y git python python-crypto
  curl -O https://bootstrap.pypa.io/get-pip.py
  python get-pip.py

  <span class="c"># installing this repository</span>
  mkdir -p ~home/k8s-on-clc
  <span class="nb">cd</span> ~home/k8s-on-clc
  git clone https://github.com/CenturyLinkCloud/adm-kubernetes-on-clc.git
  <span class="nb">cd </span>adm-kubernetes-on-clc/
  pip install -r requirements.txt

  <span class="c"># getting started</span>
  <span class="nb">cd </span>ansible
  cp credentials.sh.template credentials.sh; vi credentials.sh
  <span class="nb">source </span>credentials.sh
</code></pre>
</div>

<h2 id="cluster-creation">Cluster Creation</h2>

<p>To create a new Kubernetes cluster, simply run the kube-up.sh script. A complete
list of script options and some examples are listed below.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="nv">CLC_CLUSTER_NAME</span><span class="o">=[</span>name of kubernetes cluster]
<span class="nb">cd</span> ./adm-kubernetes-on-clc
bash kube-up.sh -c<span class="o">=</span><span class="s2">"</span><span class="nv">$CLC_CLUSTER_NAME</span><span class="s2">"</span>
</code></pre>
</div>

<p>It takes about 15 minutes to create the cluster. Once the script completes, it
will output some commands that will help you setup kubectl on your machine to
point to the new cluster.</p>

<p>When the cluster creation is complete, the configuration files for it are stored
locally on your administrative host, in the following directory</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">&gt; </span><span class="nv">CLC_CLUSTER_HOME</span><span class="o">=</span><span class="nv">$HOME</span>/.clc_kube/<span class="nv">$CLC_CLUSTER_NAME</span>/
</code></pre>
</div>

<h4 id="cluster-creation-script-options">Cluster Creation: Script Options</h4>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>Usage: kube-up.sh <span class="o">[</span>OPTIONS]
Create servers <span class="k">in </span>the CenturyLinkCloud environment and initialize a Kubernetes cluster
Environment variables CLC_V2_API_USERNAME and CLC_V2_API_PASSWD must be <span class="nb">set </span><span class="k">in
</span>order to access the CenturyLinkCloud API

All options <span class="o">(</span>both short and long form<span class="o">)</span> require arguments, and must include <span class="s2">"="</span>
between option name and option value.

     -h <span class="o">(</span>--help<span class="o">)</span>                   display this <span class="nb">help </span>and <span class="nb">exit</span>
     -c<span class="o">=</span> <span class="o">(</span>--clc_cluster_name<span class="o">=)</span>     <span class="nb">set </span>the name of the cluster, as used <span class="k">in </span>CLC group names
     -t<span class="o">=</span> <span class="o">(</span>--minion_type<span class="o">=)</span>          standard -&gt; VM <span class="o">(</span>default<span class="o">)</span>, bareMetal -&gt; physical]
     -d<span class="o">=</span> <span class="o">(</span>--datacenter<span class="o">=)</span>           VA1 <span class="o">(</span>default<span class="o">)</span>
     -m<span class="o">=</span> <span class="o">(</span>--minion_count<span class="o">=)</span>         number of kubernetes minion nodes
     -mem<span class="o">=</span> <span class="o">(</span>--vm_memory<span class="o">=)</span>          number of GB ram <span class="k">for </span>each minion
     -cpu<span class="o">=</span> <span class="o">(</span>--vm_cpu<span class="o">=)</span>             number of virtual cps <span class="k">for </span>each minion node
     -phyid<span class="o">=</span> <span class="o">(</span>--server_conf_id<span class="o">=)</span>   physical server configuration id, one of
                                      physical_server_20_core_conf_id
                                      physical_server_12_core_conf_id
                                      physical_server_4_core_conf_id <span class="o">(</span>default<span class="o">)</span>
     -etcd_separate_cluster<span class="o">=</span>yes    create a separate cluster of three etcd nodes,
                                   otherwise run etcd on the master node
</code></pre>
</div>

<h2 id="cluster-expansion">Cluster Expansion</h2>

<p>To expand an existing Kubernetes cluster, run the <code class="highlighter-rouge">add-kube-node.sh</code>
script. A complete list of script options and some examples are listed <a href="####Cluster Expansion: Script Options">[below]</a>.
This script must be run from the same host that created the cluster (or a host
that has the cluster artifact files stored in <code class="highlighter-rouge">~/.clc_kube/$cluster_name</code>).</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="nb">cd</span> ./adm-kubernetes-on-clc
bash add-kube-node.sh -c<span class="o">=</span><span class="s2">"name_of_kubernetes_cluster"</span> -m<span class="o">=</span>2
</code></pre>
</div>

<h4 id="cluster-expansion-script-options">Cluster Expansion: Script Options</h4>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>Usage: add-kube-node.sh <span class="o">[</span>OPTIONS]
Create servers <span class="k">in </span>the CenturyLinkCloud environment and add to an
existing CLC kubernetes cluster

Environment variables CLC_V2_API_USERNAME and CLC_V2_API_PASSWD must be <span class="nb">set </span><span class="k">in
</span>order to access the CenturyLinkCloud API

     -h <span class="o">(</span>--help<span class="o">)</span>                   display this <span class="nb">help </span>and <span class="nb">exit</span>
     -c<span class="o">=</span> <span class="o">(</span>--clc_cluster_name<span class="o">=)</span>     <span class="nb">set </span>the name of the cluster, as used <span class="k">in </span>CLC group names
     -m<span class="o">=</span> <span class="o">(</span>--minion_count<span class="o">=)</span>         number of kubernetes minion nodes to add

</code></pre>
</div>

<h2 id="cluster-deletion">Cluster Deletion</h2>

<p>There are two ways to delete an existing cluster:</p>

<p>1) Use our python script:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>python delete_cluster.py --cluster<span class="o">=</span>clc_cluster_name --datacenter<span class="o">=</span>DC1

</code></pre>
</div>

<p>2) Use the CenturyLink Cloud UI. To delete a cluster, log into the CenturyLink
Cloud control portal and delete the parent server group that contains the
Kubernetes Cluster. We hope to add a scripted option to do this soon.</p>

<h2 id="examples">Examples</h2>

<p>Create a cluster with name of k8s_1, 1 master node and 3 worker minions (on physical machines), in VA1</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code> bash kube-up.sh --clc_cluster_name<span class="o">=</span>k8s_1 --minion_type<span class="o">=</span>bareMetal --minion_count<span class="o">=</span>3 --datacenter<span class="o">=</span>VA1
</code></pre>
</div>

<p>Create a cluster with name of k8s_2, an ha etcd cluster on 3 VMs and 6 worker minions (on VMs), in VA1</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code> bash kube-up.sh --clc_cluster_name<span class="o">=</span>k8s_2 --minion_type<span class="o">=</span>standard --minion_count<span class="o">=</span>6 --datacenter<span class="o">=</span>VA1 --etcd_separate_cluster<span class="o">=</span>yes
</code></pre>
</div>

<p>Create a cluster with name of k8s_3, 1 master node, and 10 worker minions (on VMs) with higher mem/cpu, in UC1:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  bash kube-up.sh --clc_cluster_name<span class="o">=</span>k8s_3 --minion_type<span class="o">=</span>standard --minion_count<span class="o">=</span>10 --datacenter<span class="o">=</span>VA1 -mem<span class="o">=</span>6 -cpu<span class="o">=</span>4
</code></pre>
</div>

<h2 id="cluster-features-and-architecture">Cluster Features and Architecture</h2>

<p>We configue the Kubernetes cluster with the following features:</p>

<ul>
  <li>KubeDNS: DNS resolution and service discovery</li>
  <li>Heapster/InfluxDB: For metric collection. Needed for Grafana and auto-scaling.</li>
  <li>Grafana: Kubernetes/Docker metric dashboard</li>
  <li>KubeUI: Simple web interface to view kubernetes state</li>
  <li>Kube Dashboard: New web interface to interact with your cluster</li>
</ul>

<p>We use the following to create the kubernetes cluster:</p>

<ul>
  <li>Kubernetes 1.1.7</li>
  <li>Unbuntu 14.04</li>
  <li>Flannel 0.5.4</li>
  <li>Docker 1.9.1-0~trusty</li>
  <li>Etcd 2.2.2</li>
</ul>

<h2 id="optional-add-ons">Optional add-ons</h2>

<ul>
  <li>Logging: We offer an integrated centralized logging ELK platform so that all
Kubernetes and docker logs get sent to the ELK stack. To install the ELK stack
and configure Kubernetes to send logs to it, follow <a href="https://github.com/CenturyLinkCloud/adm-kubernetes-on-clc/blob/master/log_aggregration.md">the log
aggregation documentation</a>. Note: We don’t install this by default as
the footprint isn’t trivial.</li>
</ul>

<h2 id="cluster-management">Cluster management</h2>

<p>The most widely used tool for managing a kubernetes cluster is the command-line
utility <code class="highlighter-rouge">kubectl</code>.  If you do not already have a copy of this binary on your
administrative machine, you may run the script <code class="highlighter-rouge">install_kubectl.sh</code> which will
download it and install it in <code class="highlighter-rouge">/usr/bin/local</code>.</p>

<p>The script requires that the environment variable <code class="highlighter-rouge">CLC_CLUSTER_NAME</code> be defined</p>

<p><code class="highlighter-rouge">install_kubectl.sh</code> also writes a configuration file which will embed the necessary
authentication certificates for the particular cluster.  The configuration file is
written to the  <code class="highlighter-rouge">${CLC_CLUSTER_HOME}/kube</code> directory</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="k">${</span><span class="nv">CLC_CLUSTER_HOME</span><span class="k">}</span>/kube/config
kubectl version
kubectl cluster-info
</code></pre>
</div>

<h3 id="accessing-the-cluster-programmatically">Accessing the cluster programmatically</h3>

<p>It’s possible to use the locally-stored client certificates to access the api server. For example, you may want to use any of the <a href="https://github.com/kubernetes/kubernetes/blob/master/docs/devel/client-libraries.md">Kubernetes API client libraries</a> to program against your Kubernetes cluster in the programming language of your choice.</p>

<p>To demostrate how to use these locally stored certificates, we provide the folowing example of using <code class="highlighter-rouge">curl</code> to communicate to the master api server via https:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>curl <span class="se">\</span>
   --cacert <span class="k">${</span><span class="nv">CLC_CLUSTER_HOME</span><span class="k">}</span>/pki/ca.crt  <span class="se">\</span>
   --key <span class="k">${</span><span class="nv">CLC_CLUSTER_HOME</span><span class="k">}</span>/pki/kubecfg.key <span class="se">\</span>
   --cert <span class="k">${</span><span class="nv">CLC_CLUSTER_HOME</span><span class="k">}</span>/pki/kubecfg.crt  https://<span class="k">${</span><span class="nv">MASTER_IP</span><span class="k">}</span>:6443
</code></pre>
</div>

<p>But please note, this <em>does not</em> work out of the box with the <code class="highlighter-rouge">curl</code> binary
distributed with OSX.</p>

<h3 id="accessing-the-cluster-with-a-browser">Accessing the cluster with a browser</h3>

<p>We install two UIs on Kubernetes. The orginal KubeUI and <a href="/docs/user-guide/ui/">the newer kube
dashboard</a>. When you create a cluster, the script should output URLs for these
interfaces like this:</p>

<p>KubeUI is running at <code class="highlighter-rouge">https://${MASTER_IP}:6443/api/v1/proxy/namespaces/kube-system/services/kube-ui</code>
kubernetes-dashboard is running at <code class="highlighter-rouge">https://${MASTER_IP}:6443/api/v1/proxy/namespaces/kube-system/services/kubernetes-dashboard</code></p>

<p>Note on Authentication to the UIs: The cluster is set up to use basic
authentication for the user <em>admin</em>.   Hitting the url at
<code class="highlighter-rouge">https://${MASTER_IP}:6443</code> will require accepting the self-signed certificate
from the apiserver, and then presenting the admin password written to file at:</p>

<p><code class="highlighter-rouge">&gt; _${CLC_CLUSTER_HOME}/kube/admin_password.txt_</code></p>

<h3 id="configuration-files">Configuration files</h3>

<p>Various configuration files are written into the home directory <em>CLC_CLUSTER_HOME</em> under
<code class="highlighter-rouge">.clc_kube/${CLC_CLUSTER_NAME}</code> in several subdirectories. You can use these files
to access the cluster from machines other than where you created the cluster from.</p>

<ul>
  <li><code class="highlighter-rouge">config/</code>: Ansible variable files containing parameters describing the master and minion hosts</li>
  <li><code class="highlighter-rouge">hosts/</code>: hosts files listing access information for the ansible playbooks</li>
  <li><code class="highlighter-rouge">kube/</code>: <code class="highlighter-rouge">kubectl</code> configuration files, and the basic-authentication password for admin access to the Kubernetes API</li>
  <li><code class="highlighter-rouge">pki/</code>: public key infrastructure files enabling TLS communication in the cluster</li>
  <li><code class="highlighter-rouge">ssh/</code>: SSH keys for root access to the hosts</li>
</ul>

<h2 id="kubectl-usage-examples"><code class="highlighter-rouge">kubectl</code> usage examples</h2>

<p>There are a great many features of <em>kubectl</em>.  Here are a few examples</p>

<p>List existing nodes, pods, services and more, in all namespaces, or in just one:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>kubectl get nodes
kubectl get --all-namespaces services
kubectl get --namespace<span class="o">=</span>kube-system replicationcontrollers
</code></pre>
</div>

<p>The Kubernetes API server exposes services on web URLs, which are protected by requiring
client certificates.  If you run a kubectl proxy locally, <code class="highlighter-rouge">kubectl</code> will provide
the necessary certificates and serve locally over http.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>kubectl proxy -p 8001
</code></pre>
</div>

<p>Then, you can access urls like <code class="highlighter-rouge">http://127.0.0.1:8001/api/v1/proxy/namespaces/kube-system/services/kube-ui/</code> without the need for client certificates in your browser.</p>

<h2 id="what-kubernetes-features-do-not-work-on-centurylink-cloud">What Kubernetes features do not work on CenturyLink Cloud</h2>

<p>These are the known items that don’t work on CenturyLink cloud but do work on other cloud providers:</p>

<ul>
  <li>
    <p>At this time, there is no support services of the type <a href="/docs/user-guide/load-balancer/">LoadBalancer</a>. We are actively working on this and hope to publish the changes sometime around April 2016.</p>
  </li>
  <li>
    <p>At this time, there is no support for persistent storage volumes provided by
CenturyLink Cloud. However, customers can bring their own persistent storage
offering. We ourselves use Gluster.</p>
  </li>
</ul>

<h2 id="ansible-files">Ansible Files</h2>

<p>If you want more information about our Ansible files, please <a href="https://github.com/CenturyLinkCloud/adm-kubernetes-on-clc/blob/master/ansible/README.md">read this file</a></p>

<h2 id="further-reading">Further reading</h2>

<p>Please see the <a href="/docs/">Kubernetes docs</a> for more details on administering
and using a Kubernetes cluster.</p>


        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/getting-started-guides/clc.md?pixel" alt="Analytics" /></a>
        <div id="pd_rating_holder_8345992"></div>
		<script type="text/javascript">
	        PDRTJS_settings_8345992 = {
		        "id" : "8345992",
		        "unique_id" : "/docs/getting-started-guides/clc/",
		        "title" : "Running Kubernetes on CenturyLink Cloud",
		        "permalink" : "http://kubernetes.github.io/docs/getting-started-guides/clc/"
	        };
	        (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
	</div>
</section>

<footer>
	<main class="light-text">
		<nav>
			<a href="/docs/hellonode/">Get Started</a>
			<a href="/docs/">Documentation</a>
			<a href="http://blog.kubernetes.io/">Blog</a>
			<a href="/community/">Community</a>
		</nav>
		<div class="social">
			<div>
				<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
				<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
				<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
			</div>
			<div>
				<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
				<a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
				<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
			</div>
			<div>
				<span>I wish this page</span>
				<input type="text" id="wishField" name="wishField" placeholder="enter your wish">
			</div>
		</div>
		<div id="miceType" class="center">&copy; 2016 Kubernetes</div>
	</main>
</footer>


<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
	.cse .gsc-control-cse, .gsc-control-cse, {
		padding: 0;
	}
	.gsc-control-cse table, .gsc-control-cse-en table {
		margin:0px !important;
	}

	.gsc-above-wrapper-area {
		border-bottom: 0;
	}
</style>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36037335-10', 'auto');
  ga('send', 'pageview');
</script>
<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
<!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->
</body>
</html>
