

<!Doctype html>
<html id="docs" class="Guides">


<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="canonical" href="http://kubernetes.io/docs/getting-started-guides/openstack-heat/" />
	<link rel="shortcut icon" type="image/png" href="/images/favicon.png">
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href='https://fonts.googleapis.com/css?family=Roboto+Mono' type='text/css'>
	<link rel="stylesheet" href="/css/styles.css"/>
        <link rel="stylesheet" href="/css/jquery-ui.min.css">
        <link rel="stylesheet" href="/css/sweetalert.css">
	<script src="/js/jquery-2.2.0.min.js"></script>
        <script src="/js/jquery-ui.min.js"></script>
	<script src="/js/script.js"></script>
        <script src="/js/sweetalert.min.js"></script>
	<title>Kubernetes - OpenStack Heat</title>
</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>
<header>
	<a href="/" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="/docs/" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a>
		<a href="/docs/hellonode/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
		<button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="/docs/hellonode/">Get Started</a></h3>
				<p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
			</div>
			<div class="nav-box">
				<h3><a href="/docs/">Documentation</a></h3>
				<p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
			</div>
			<div class="nav-box">
				<h3><a href="/community/">Community</a></h3>
				<p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
			</div>
			<div class="nav-box">
				<h3><a href="http://blog.kubernetes.io">Blog</a></h3>
				<p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
			</div>
		</main>
		<main data-auto-burger="primary">
			<div class="left">
				<h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
				<a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
			</div>

			<div class="right">
				<h5 class="github-invite">Explore the community</h5>
				<div class="social">
					<a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
					<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
					<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
					<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
					<a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
					<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
				</div>
			</div>
			<div class="clear" style="clear: both"></div>
		</main>
	</nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
	<h1>Guides</h1>
	<h5>How to get started, and achieve tasks, using Kubernetes</h5>
	<div id="vendorStrip" class="light-text">
		<ul>
			<li><a href="/docs/" class="YAH">GUIDES</a></li>
			<li><a href="/docs/reference" >REFERENCE</a></li>
			<li><a href="/docs/samples" >SAMPLES</a></li>
			<li><a href="/docs/troubleshooting/" >SUPPORT</a></li>
		</ul>
		<div id="searchBox">
			<input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
		</div>
	</div>
</section>

<section id="encyclopedia">
	<div id="docsToc">
        <div class="pi-accordion">
        
    <a class="item" data-title="Guides" href="/docs/"></a>
<div class="item" data-title="Getting Started">
  <div class="container">
    <a class="item" data-title="What is Kubernetes?" href="/docs/whatisk8s/"></a>
    <a class="item" data-title="Downloading or Building Kubernetes" href="/docs/getting-started-guides/binary_release/"></a>
    <a class="item" data-title="Hello World Walkthrough" href="/docs/hellonode/"></a>
    <a class="item" data-title="Online Training Course" href="https://www.udacity.com/course/scalable-microservices-with-kubernetes--ud615" target='_blank'></a>
  </div>
</div>
<div class="item" data-title="Accessing the Cluster">
  <div class="container">
    <a class="item" data-title="Installing and Setting up kubectl" href="/docs/user-guide/prereqs/"></a>
    <a class="item" data-title="Accessing Clusters" href="/docs/user-guide/accessing-the-cluster/"></a>
    <a class="item" data-title="Sharing Cluster Access with kubeconfig" href="/docs/user-guide/sharing-clusters/"></a>
    <a class="item" data-title="Authenticating Across Clusters with kubeconfig" href="/docs/user-guide/kubeconfig-file/"></a>
  </div>
</div>
    <a class="item" data-title="User Guide" href="/docs/user-guide/"></a>
    <a class="item" data-title="Web UI (Dashboard)" href="/docs/user-guide/ui/"></a>
<div class="item" data-title="Workload Deployment and Management">
  <div class="container">
    <a class="item" data-title="Launching, Exposing, and Killing Applications" href="/docs/user-guide/quick-start/"></a>
    <a class="item" data-title="Deploying Applications" href="/docs/user-guide/deploying-applications/"></a>
    <a class="item" data-title="Managing Resources" href="/docs/user-guide/managing-deployments/"></a>
    <a class="item" data-title="Replication Controller Operations" href="/docs/user-guide/replication-controller/operations/"></a>
    <a class="item" data-title="Resizing a Replication Controller" href="/docs/user-guide/resizing-a-replication-controller/"></a>
    <a class="item" data-title="Rolling Updates" href="/docs/user-guide/rolling-updates/"></a>
    <a class="item" data-title="Rolling Update Demo" href="/docs/user-guide/update-demo/"></a>
    <a class="item" data-title="Secrets Walkthrough" href="/docs/user-guide/secrets/walkthrough/"></a>
    <a class="item" data-title="Using ConfigMap" href="/docs/user-guide/configmap/"></a>
    <a class="item" data-title="Horizontal Pod Autoscaling" href="/docs/user-guide/horizontal-pod-autoscaling/walkthrough/"></a>
    <a class="item" data-title="Best Practices for Configuration" href="/docs/user-guide/config-best-practices/"></a>
    <a class="item" data-title="Using kubectl to Manage Resources" href="/docs/user-guide/working-with-resources/"></a>
    <a class="item" data-title="Garbage collection" href="/docs/user-guide/garbage-collector/"></a>
  </div>
</div>
<div class="item" data-title="Batch Jobs">
  <div class="container">
    <a class="item" data-title="Jobs" href="/docs/user-guide/jobs/"></a>
    <a class="item" data-title="Parallel Processing using Expansions" href="/docs/user-guide/jobs/expansions/"></a>
    <a class="item" data-title="Coarse Parallel Processing using a Work Queue" href="/docs/user-guide/jobs/work-queue-1/"></a>
    <a class="item" data-title="Fine Parallel Processing using a Work Queue" href="/docs/user-guide/jobs/work-queue-2/"></a>
  </div>
</div>
<div class="item" data-title="Service Discovery and Load Balancing">
  <div class="container">
    <a class="item" data-title="Connecting Applications with Services" href="/docs/user-guide/connecting-applications/"></a>
    <a class="item" data-title="Service Operations" href="/docs/user-guide/services/operations/"></a>
    <a class="item" data-title="Creating an External Load Balancer" href="/docs/user-guide/load-balancer/"></a>
    <a class="item" data-title="Configuring Your Cloud Provider's Firewalls" href="/docs/user-guide/services-firewalls/"></a>
    <a class="item" data-title="Cross-cluster Service Discovery using Federated Services" href="/docs/user-guide/federation/federated-services/"></a>
  </div>
</div>
<div class="item" data-title="Containers and Pods">
  <div class="container">
    <a class="item" data-title="Running Your First Containers" href="/docs/user-guide/simple-nginx/"></a>
    <a class="item" data-title="Creating Single-Container Pods" href="/docs/user-guide/pods/single-container/"></a>
    <a class="item" data-title="Creating Multi-Container Pods" href="/docs/user-guide/pods/multi-container/"></a>
    <a class="item" data-title="Configuring Containers" href="/docs/user-guide/configuring-containers/"></a>
    <a class="item" data-title="Working with Containers in Production" href="/docs/user-guide/production-pods/"></a>
    <a class="item" data-title="Commands and Capabilities" href="/docs/user-guide/containers/"></a>
    <a class="item" data-title="Using Environment Variables" href="/docs/user-guide/environment-guide/"></a>
    <a class="item" data-title="Managing Compute Resources" href="/docs/user-guide/compute-resources/"></a>
    <a class="item" data-title="The Lifecycle of a Pod" href="/docs/user-guide/pod-states/"></a>
    <a class="item" data-title="Checking Pod Health" href="/docs/user-guide/liveness/"></a>
    <a class="item" data-title="Container Lifecycle Hooks" href="/docs/user-guide/container-environment/"></a>
    <a class="item" data-title="Assigning Pods to Nodes" href="/docs/user-guide/node-selection/"></a>
    <a class="item" data-title="Using the Downward API to Convey Pod Properties" href="/docs/user-guide/downward-api/"></a>
    <a class="item" data-title="Downward API Volumes" href="/docs/user-guide/downward-api/volume"></a>
    <a class="item" data-title="Persistent Volumes Walkthrough" href="/docs/user-guide/persistent-volumes/walkthrough/"></a>
    <a class="item" data-title="Bootstrapping Pet Sets" href="/docs/user-guide/petset/bootstrapping/"></a>
  </div>
</div>
<div class="item" data-title="Monitoring, Logging, and Debugging Containers">
  <div class="container">
    <a class="item" data-title="Resource Usage Monitoring" href="/docs/user-guide/monitoring/"></a>
    <a class="item" data-title="Logging" href="/docs/getting-started-guides/logging/"></a>
    <a class="item" data-title="Logging with Elasticsearch and Kibana" href="/docs/getting-started-guides/logging-elasticsearch/"></a>
    <a class="item" data-title="Running Commands in a Container with kubectl exec" href="/docs/user-guide/getting-into-containers/"></a>
    <a class="item" data-title="Connect with Proxies" href="/docs/user-guide/connecting-to-applications-proxy/"></a>
    <a class="item" data-title="Connect with Port Forwarding" href="/docs/user-guide/connecting-to-applications-port-forward/"></a>
    <a class="item" data-title="Using Explorer to Examine the Runtime Environment" href="https://github.com/kubernetes/kubernetes/tree/release-1.3/examples/explorer" target='_blank'></a>
  </div>
</div>
<div class="item" data-title="Creating a Cluster">
  <div class="container">
    <a class="item" data-title="Picking the Right Solution" href="/docs/getting-started-guides/"></a>
<div class="item" data-title="Running Kubernetes on Your Local Machine">
  <div class="container">
    <a class="item" data-title="Running Kubernetes Locally via Minikube" href="/docs/getting-started-guides/minikube/"></a>
    <a class="item" data-title="Deprecated Alternatives" href="/docs/getting-started-guides/alternatives/"></a>
  </div>
</div>
<div class="item" data-title="Running Kubernetes on Turn-key Cloud Solutions">
  <div class="container">
    <a class="item" data-title="Running Kubernetes on Google Container Engine" href="https://cloud.google.com/container-engine/docs/before-you-begin/" target='_blank'></a>
    <a class="item" data-title="Running Kubernetes on Google Compute Engine" href="/docs/getting-started-guides/gce/"></a>
    <a class="item" data-title="Running Kubernetes on AWS EC2" href="/docs/getting-started-guides/aws/"></a>
    <a class="item" data-title="Running Kubernetes on Azure (Weave-based)" href="/docs/getting-started-guides/coreos/azure/"></a>
    <a class="item" data-title="Running Kubernetes on Azure (Flannel-based)" href="/docs/getting-started-guides/azure/"></a>
    <a class="item" data-title="Running Kubernetes on CenturyLink Cloud" href="/docs/getting-started-guides/clc/"></a>
  </div>
</div>
<div class="item" data-title="Running Kubernetes on Custom Solutions">
  <div class="container">
    <a class="item" data-title="Creating a Custom Cluster from Scratch" href="/docs/getting-started-guides/scratch/"></a>
<div class="item" data-title="Custom Cloud Solutions">
  <div class="container">
    <a class="item" data-title="CoreOS on AWS or GCE" href="/docs/getting-started-guides/coreos/"></a>
    <a class="item" data-title="Ubuntu on AWS or Joyent" href="/docs/getting-started-guides/juju/"></a>
    <a class="item" data-title="CoreOS on Rackspace" href="/docs/getting-started-guides/rackspace/"></a>
  </div>
</div>
<div class="item" data-title="On-Premise VMs">
  <div class="container">
    <a class="item" data-title="CoreOS on Vagrant" href="/docs/getting-started-guides/coreos/"></a>
    <a class="item" data-title="Cloudstack" href="/docs/getting-started-guides/cloudstack/"></a>
    <a class="item" data-title="VMware vSphere" href="/docs/getting-started-guides/vsphere/"></a>
    <a class="item" data-title="VMware Photon Controller" href="/docs/getting-started-guides/photon-controller/"></a>
    <a class="item" data-title="Juju" href="/docs/getting-started-guides/juju/"></a>
    <a class="item" data-title="DCOS" href="/docs/getting-started-guides/dcos/"></a>
    <a class="item" data-title="CoreOS on libvirt" href="/docs/getting-started-guides/libvirt-coreos/"></a>
    <a class="item" data-title="oVirt" href="/docs/getting-started-guides/ovirt/"></a>
    <a class="item" data-title="OpenStack Heat" href="/docs/getting-started-guides/openstack-heat/"></a>
    <a class="item" data-title="CoreOS on Multinode Cluster" href="/docs/getting-started-guides/coreos/coreos_multinode_cluster/"></a>
    <a class="item" data-title="Fedora With Calico Networking" href="/docs/getting-started-guides/fedora/fedora-calico/"></a>
<div class="item" data-title="rkt">
  <div class="container">
    <a class="item" data-title="Running Kubernetes with rkt" href="/docs/getting-started-guides/rkt/"></a>
    <a class="item" data-title="Known Issues when Using rkt" href="/docs/getting-started-guides/rkt/notes/"></a>
  </div>
</div>
    <a class="item" data-title="Kubernetes on Mesos" href="/docs/getting-started-guides/mesos/"></a>
    <a class="item" data-title="Kubernetes on Mesos on Docker" href="/docs/getting-started-guides/mesos-docker/"></a>
  </div>
</div>
<div class="item" data-title="Bare Metal">
  <div class="container">
    <a class="item" data-title="Offline" href="/docs/getting-started-guides/coreos/bare_metal_offline/"></a>
    <a class="item" data-title="Fedora via Ansible" href="/docs/getting-started-guides/fedora/fedora_ansible_config/"></a>
    <a class="item" data-title="Fedora (Single Node)" href="/docs/getting-started-guides/fedora/fedora_manual_config/"></a>
    <a class="item" data-title="Fedora (Multi Node)" href="/docs/getting-started-guides/fedora/flannel_multi_node_cluster/"></a>
    <a class="item" data-title="CentOS" href="/docs/getting-started-guides/centos/centos_manual_config/"></a>
    <a class="item" data-title="CoreOS" href="/docs/getting-started-guides/coreos"></a>
    <a class="item" data-title="CoreOS with Calico" href="/docs/getting-started-guides/coreos/bare_metal_calico/"></a>
    <a class="item" data-title="Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    <a class="item" data-title="Ubuntu Nodes with Calico" href="/docs/getting-started-guides/ubuntu-calico/"></a>
  </div>
</div>
  </div>
</div>
    <a class="item" data-title="Portable Multi-Node Cluster" href="/docs/getting-started-guides/docker-multinode/"></a>
    <a class="item" data-title="Building Large Clusters" href="/docs/admin/cluster-large/"></a>
    <a class="item" data-title="Running in Multiple Zones" href="/docs/admin/multiple-zones/"></a>
    <a class="item" data-title="Building High-Availability Clusters" href="/docs/admin/high-availability/"></a>
  </div>
</div>
<div class="item" data-title="Administering Clusters">
  <div class="container">
    <a class="item" data-title="Admin Guide" href="/docs/admin/"></a>
    <a class="item" data-title="Cluster Management Guide" href="/docs/admin/cluster-management/"></a>
    <a class="item" data-title="Sharing a Cluster with Namespaces" href="/docs/admin/namespaces/"></a>
    <a class="item" data-title="Namespaces Walkthrough" href="/docs/admin/namespaces/walkthrough/"></a>
    <a class="item" data-title="Setting Pod CPU and Memory Limits" href="/docs/admin/limitrange/"></a>
    <a class="item" data-title="Understanding Resource Quotas" href="/docs/admin/resourcequota/"></a>
    <a class="item" data-title="Applying Resource Quotas and Limits" href="/docs/admin/resourcequota/walkthrough/"></a>
    <a class="item" data-title="Kubernetes Components" href="/docs/admin/cluster-components/"></a>
    <a class="item" data-title="Configuring Kubernetes Use of etcd" href="/docs/admin/etcd/"></a>
    <a class="item" data-title="Federating Clusters" href="/docs/admin/federation/"></a>
    <a class="item" data-title="Using Multiple Clusters" href="/docs/admin/multi-cluster/"></a>
    <a class="item" data-title="Changing Cluster Size" href="https://github.com/kubernetes/kubernetes/wiki/User-FAQ#how-do-i-change-the-size-of-my-cluster/" target='_blank'></a>
    <a class="item" data-title="Configuring Multiple Schedulers" href="/docs/admin/multiple-schedulers/"></a>
    <a class="item" data-title="Networking in Kubernetes" href="/docs/admin/networking/"></a>
    <a class="item" data-title="Using DNS Pods and Services" href="/docs/admin/dns/"></a>
    <a class="item" data-title="Setting Up and Configuring DNS" href="https://github.com/kubernetes/kubernetes/tree/release-1.3/examples/cluster-dns" target='_blank'></a>
    <a class="item" data-title="Master <-> Node Communication" href="/docs/admin/master-node-communication/"></a>
    <a class="item" data-title="Network Plugins" href="/docs/admin/network-plugins/"></a>
    <a class="item" data-title="Static Pods" href="/docs/admin/static-pods/"></a>
    <a class="item" data-title="Configuring kubelet Garbage Collection" href="/docs/admin/garbage-collection/"></a>
    <a class="item" data-title="Configuring Out Of Resource Handling" href="/docs/admin/out-of-resource/"></a>
    <a class="item" data-title="Configuring Kubernetes with Salt" href="/docs/admin/salt/"></a>
    <a class="item" data-title="Monitoring Node Health" href="/docs/admin/node-problem/"></a>
  </div>
</div>
        </div> <!-- /pi-accordion -->
		<button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
	</div> <!-- /docsToc -->
	<div id="docsContent">
        <p><a href="/editdocs#docs/getting-started-guides/openstack-heat.md" id="editPageButton">Edit This Page</a></p>
    	<h1>OpenStack Heat</h1>
		<ul id="markdown-toc">
  <li><a href="#getting-started-with-openstack" id="markdown-toc-getting-started-with-openstack">Getting started with OpenStack</a></li>
  <li><a href="#pre-requisites" id="markdown-toc-pre-requisites">Pre-Requisites</a>    <ul>
      <li><a href="#install-openstack-cli-tools" id="markdown-toc-install-openstack-cli-tools">Install OpenStack CLI tools</a></li>
      <li><a href="#configure-openstack-cli-tools" id="markdown-toc-configure-openstack-cli-tools">Configure Openstack CLI tools</a></li>
      <li><a href="#set-additional-configuration-values" id="markdown-toc-set-additional-configuration-values">Set additional configuration values</a></li>
      <li><a href="#manually-overriding-configuration-values" id="markdown-toc-manually-overriding-configuration-values">Manually overriding configuration values</a></li>
    </ul>
  </li>
  <li><a href="#starting-a-cluster" id="markdown-toc-starting-a-cluster">Starting a cluster</a></li>
  <li><a href="#inspect-your-cluster" id="markdown-toc-inspect-your-cluster">Inspect your cluster</a></li>
  <li><a href="#using-your-cluster" id="markdown-toc-using-your-cluster">Using your cluster</a></li>
  <li><a href="#administering-your-cluster-with-openstack" id="markdown-toc-administering-your-cluster-with-openstack">Administering your cluster with Openstack</a></li>
  <li><a href="#sshing-to-your-nodes" id="markdown-toc-sshing-to-your-nodes">SSHing to your nodes</a></li>
  <li><a href="#cluster-deployment-customization-examples" id="markdown-toc-cluster-deployment-customization-examples">Cluster deployment customization examples</a>    <ul>
      <li><a href="#proxy-configuration" id="markdown-toc-proxy-configuration">Proxy configuration</a></li>
      <li><a href="#setting-different-swift-url" id="markdown-toc-setting-different-swift-url">Setting different Swift URL</a></li>
      <li><a href="#public-network-name" id="markdown-toc-public-network-name">Public network name.</a></li>
      <li><a href="#spinning-up-additional-clusters" id="markdown-toc-spinning-up-additional-clusters">Spinning up additional clusters.</a></li>
    </ul>
  </li>
  <li><a href="#tearing-down-your-cluster" id="markdown-toc-tearing-down-your-cluster">Tearing down your cluster</a></li>
  <li><a href="#support-level" id="markdown-toc-support-level">Support Level</a></li>
</ul>

<h2 id="getting-started-with-openstack">Getting started with OpenStack</h2>

<p>This guide will take you through the steps of deploying Kubernetes to Openstack using <code class="highlighter-rouge">kube-up.sh</code>. The primary mechanisms for this are <a href="https://wiki.openstack.org/wiki/Heat">OpenStack Heat</a> and the <a href="https://github.com/kubernetes/kubernetes/tree/master/cluster/saltbase">SaltStack</a> distributed with Kubernetes.</p>

<p>The default OS is CentOS 7, this has not been tested on other operating systems.</p>

<p>This guide assumes you have access to a working OpenStack cluster with the following features:</p>

<ul>
  <li>Nova</li>
  <li>Neutron</li>
  <li>Swift</li>
  <li>Glance</li>
  <li>Heat</li>
  <li>DNS resolution of instance names</li>
</ul>

<p>By default this provider provisions 4 m1.medium instances. If you do not have resources available, please see the <a href="#set-additional-configuration-values">Set additional configuration values</a> section for information on reducing the footprint of your cluster.</p>

<h2 id="pre-requisites">Pre-Requisites</h2>
<p>If you already have the required versions of the OpenStack CLI tools installed and configured, you can move on to the <a href="#starting-a-cluster">Starting a cluster</a> section.</p>

<h4 id="install-openstack-cli-tools">Install OpenStack CLI tools</h4>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>sudo pip install -U --force <span class="s1">'python-openstackclient==2.4.0'</span>
sudo pip install -U --force <span class="s1">'python-heatclient==1.1.0'</span>
sudo pip install -U --force <span class="s1">'python-swiftclient==3.0.0'</span>
sudo pip install -U --force <span class="s1">'python-glanceclient==2.0.0'</span>
sudo pip install -U --force <span class="s1">'python-novaclient==3.4.0'</span>
</code></pre>
</div>

<h4 id="configure-openstack-cli-tools">Configure Openstack CLI tools</h4>

<p>Please talk to your local OpenStack administrator for an <code class="highlighter-rouge">openrc.sh</code> file.</p>

<p>Once you have that file, source it into your environment by typing</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>. ~/path/to/openrc.sh
</code></pre>
</div>

<p>This provider will consume the <a href="http://docs.openstack.org/user-guide/common/cli_set_environment_variables_using_openstack_rc.html">correct variables</a> to talk to OpenStack and turn-up the Kubernetes cluster.</p>

<p>Otherwise, you must set the following appropriately:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">OS_USERNAME</span><span class="o">=</span>username
<span class="nb">export </span><span class="nv">OS_PASSWORD</span><span class="o">=</span>password
<span class="nb">export </span><span class="nv">OS_TENANT_NAME</span><span class="o">=</span>projectName
<span class="nb">export </span><span class="nv">OS_AUTH_URL</span><span class="o">=</span>https://identityHost:portNumber/v2.0
<span class="nb">export </span><span class="nv">OS_TENANT_ID</span><span class="o">=</span>tenantIDString
<span class="nb">export </span><span class="nv">OS_REGION_NAME</span><span class="o">=</span>regionName
</code></pre>
</div>

<h4 id="set-additional-configuration-values">Set additional configuration values</h4>

<p>In addition, here are some commonly changed variables specific to this provider, with example values. Under most circumstances you will not have to change these. Please see the files in the next section for a full list of options.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">STACK_NAME</span><span class="o">=</span>KubernetesStack
<span class="nb">export </span><span class="nv">NUMBER_OF_MINIONS</span><span class="o">=</span>3
<span class="nb">export </span><span class="nv">MAX_NUMBER_OF_MINIONS</span><span class="o">=</span>3
<span class="nb">export </span><span class="nv">MASTER_FLAVOR</span><span class="o">=</span>m1.small
<span class="nb">export </span><span class="nv">MINION_FLAVOR</span><span class="o">=</span>m1.small
<span class="nb">export </span><span class="nv">EXTERNAL_NETWORK</span><span class="o">=</span>public
<span class="nb">export </span><span class="nv">DNS_SERVER</span><span class="o">=</span>8.8.8.8
<span class="nb">export </span><span class="nv">IMAGE_URL_PATH</span><span class="o">=</span>http://cloud.centos.org/centos/7/images
<span class="nb">export </span><span class="nv">IMAGE_FILE</span><span class="o">=</span>CentOS-7-x86_64-GenericCloud-1510.qcow2
<span class="nb">export </span><span class="nv">SWIFT_SERVER_URL</span><span class="o">=</span>http://192.168.123.100:8080
<span class="nb">export </span><span class="nv">ENABLE_PROXY</span><span class="o">=</span><span class="nb">false</span>
</code></pre>
</div>

<h4 id="manually-overriding-configuration-values">Manually overriding configuration values</h4>

<p>If you do not have your environment variables set, or do not want them consumed, modify the variables in the following files under <code class="highlighter-rouge">cluster/openstack-heat</code>:</p>

<ul>
  <li><strong><a href="http://releases.k8s.io/master/cluster/openstack-heat/config-default.sh">config-default.sh</a></strong> Sets all parameters needed for heat template.</li>
  <li><strong><a href="http://releases.k8s.io/master/cluster/openstack-heat/config-image.sh">config-image.sh</a></strong> Sets parameters needed to download and create new OpenStack image via glance.</li>
  <li><strong><a href="http://releases.k8s.io/master/cluster/openstack-heat/openrc-default.sh">openrc-default.sh</a></strong> Sets environment variables for communicating to OpenStack. These are consumed by the cli tools (heat, glance, swift, nova).</li>
  <li><strong><a href="http://releases.k8s.io/master/cluster/openstack-heat/openrc-swift.sh">openrc-swift.sh</a></strong> Some OpenStack setups require the use of seperate swift credentials. Put those credentials in this file.</li>
</ul>

<p>Please see the contents of these files for documentation regarding each variable’s function.</p>

<h2 id="starting-a-cluster">Starting a cluster</h2>

<p>Once Kubernetes version 1.3 is released, and you’ve installed the OpenStack CLI tools and have set your OpenStack environment variables, issue this command:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat; curl -sS https://get.k8s.io | bash
</code></pre>
</div>
<p>Alternatively, you can download a <a href="https://github.com/kubernetes/kubernetes/releases">Kubernetes release</a> of version 1.3 or higher and extract the archive. To start your cluster, open a shell and run:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="nb">cd </span>kubernetes <span class="c"># Or whichever path you have extracted the release to</span>
<span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat ./cluster/kube-up.sh
</code></pre>
</div>
<p>Or, if you are working from a checkout of the Kubernetes code base, and want to build/test from source:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="nb">cd </span>kubernetes <span class="c"># Or whatever your checkout root directory is called</span>
make clean
make quick-release
<span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat ./cluster/kube-up.sh
</code></pre>
</div>

<h2 id="inspect-your-cluster">Inspect your cluster</h2>

<p>Once kube-up is finished, your cluster should be running:</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code>./cluster/kubectl.sh get cs
NAME                 STATUS    MESSAGE              ERROR
controller-manager   Healthy   ok
scheduler            Healthy   ok
etcd-1               Healthy   {"health": "true"}
etcd-0               Healthy   {"health": "true"}
</code></pre>
</div>

<p>You can also list the nodes in your cluster:</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code>./cluster/kubectl.sh get nodes
NAME                            STATUS    AGE
kubernetesstack-node-ojszyjtr   Ready     42m
kubernetesstack-node-tzotzcbp   Ready     46m
kubernetesstack-node-uah8pkju   Ready     47m
</code></pre>
</div>
<p>Being a new cluster, there will be no pods or replication controllers in the default namespace:</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code>./cluster/kubectl.sh get pods
./cluster/kubectl.sh get replicationcontrollers
</code></pre>
</div>

<p>You are now ready to create Kubernetes objects.</p>

<h2 id="using-your-cluster">Using your cluster</h2>

<p>For a simple test, issue the following command:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>./cluster/kubectl.sh run nginx --image<span class="o">=</span>nginx --generator<span class="o">=</span>run-pod/v1
</code></pre>
</div>

<p>Soon, you should have a running nginx pod:</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code>./cluster/kubectl.sh get pods
NAME      READY     STATUS    RESTARTS   AGE
nginx     1/1       Running   0          5m
</code></pre>
</div>

<p>Once the nginx pod is running, use the port-forward command to set up a proxy from your machine to the pod.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>./cluster/kubectl.sh port-forward nginx 8888:80
</code></pre>
</div>

<p>You should now see nginx on <a href="">http://localhost:8888</a>.</p>

<p>For more complex examples please see the <a href="https://github.com/kubernetes/kubernetes/tree/master/examples/">examples directory</a>.</p>

<h2 id="administering-your-cluster-with-openstack">Administering your cluster with Openstack</h2>

<p>You can manage the nodes in your cluster using the OpenStack CLI Tools.</p>

<p>First, set your environment variables:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>. cluster/openstack-heat/config-default.sh
. cluster/openstack-heat/openrc-default.sh
</code></pre>
</div>

<p>To get all information about your cluster, use heat:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>heat stack-show <span class="nv">$STACK_NAME</span>
</code></pre>
</div>

<p>To see a list of nodes, use nova:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>nova list --name<span class="o">=</span><span class="nv">$STACK_NAME</span>
</code></pre>
</div>

<p>See the <a href="http://docs.openstack.org/cli-reference/">OpenStack CLI Reference</a> for more details.</p>

<h2 id="sshing-to-your-nodes">SSHing to your nodes</h2>

<p>Your public key was added during the cluster turn-up, so you can easily ssh to them for troubleshooting purposes.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>ssh minion@IP_ADDRESS
</code></pre>
</div>

<h2 id="cluster-deployment-customization-examples">Cluster deployment customization examples</h2>
<p>You may find the need to modify environment variables to change the behaviour of kube-up. Here are some common scenarios:</p>

<h4 id="proxy-configuration">Proxy configuration</h4>
<p>If you are behind a proxy, and have your local environment variables setup, you can use these variables to setup your Kubernetes cluster:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="nv">ENABLE_PROXY</span><span class="o">=</span><span class="nb">true </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat ./cluster/kube-up.sh
</code></pre>
</div>

<h4 id="setting-different-swift-url">Setting different Swift URL</h4>
<p>Some deployments differ from the default Swift URL:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code> <span class="nv">SWIFT_SERVER_URL</span><span class="o">=</span><span class="s2">"http://10.100.0.100:8080"</span> <span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat ./cluster/kube-up.sh
</code></pre>
</div>

<h4 id="public-network-name">Public network name.</h4>
<p>Sometimes the name of the public network differs from the default <code class="highlighter-rouge">public</code>:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="nv">EXTERNAL_NETWORK</span><span class="o">=</span><span class="s2">"network_external"</span> <span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat ./cluster/kube-up.sh
</code></pre>
</div>

<h4 id="spinning-up-additional-clusters">Spinning up additional clusters.</h4>
<p>You may want to spin up another cluster within your OpenStack project. Use the <code class="highlighter-rouge">$STACK_NAME</code> variable to accomplish this.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="nv">STACK_NAME</span><span class="o">=</span>k8s-cluster-2 <span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat ./cluster/kube-up.sh
</code></pre>
</div>

<p>For more configuration examples, please browse the files mentioned in the <a href="#set-additional-configuration-values">Configuration</a> section.</p>

<h2 id="tearing-down-your-cluster">Tearing down your cluster</h2>

<p>To bring down your cluster, issue the following command:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat ./cluster/kube-down.sh
</code></pre>
</div>
<p>If you have changed the default <code class="highlighter-rouge">$STACK_NAME</code>, you must specify the name. Note that this will not remove any Cinder volumes created by Kubernetes.</p>

<h2 id="support-level">Support Level</h2>

<table>
  <thead>
    <tr>
      <th>IaaS Provider</th>
      <th>Config. Mgmt</th>
      <th>OS</th>
      <th>Networking</th>
      <th>Docs</th>
      <th>Conforms</th>
      <th>Support Level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>OpenStack Heat</td>
      <td>Saltstack</td>
      <td>CentOS</td>
      <td>Neutron + flannel hostgw</td>
      <td><a href="/docs/getting-started-guides/openstack-heat">docs</a></td>
      <td> </td>
      <td>Community (<a href="https://github.com/FujitsuEnablingSoftwareTechnologyGmbH">@FujitsuEnablingSoftwareTechnologyGmbH</a>)</td>
    </tr>
  </tbody>
</table>

<p>For support level information on all solutions, see the <a href="/docs/getting-started-guides/#table-of-solutions">Table of solutions</a> chart.</p>

        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/getting-started-guides/openstack-heat.md?pixel" alt="Analytics" /></a>
        <div id="pd_rating_holder_8345992"></div>
		<script type="text/javascript">
	        PDRTJS_settings_8345992 = {
		        "id" : "8345992",
		        "unique_id" : "/docs/getting-started-guides/openstack-heat/",
		        "title" : "OpenStack Heat",
		        "permalink" : "http://kubernetes.github.io/docs/getting-started-guides/openstack-heat/"
	        };
	        (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
	</div>
</section>

<footer>
	<main class="light-text">
		<nav>
			<a href="/docs/hellonode/">Get Started</a>
			<a href="/docs/">Documentation</a>
			<a href="http://blog.kubernetes.io/">Blog</a>
			<a href="/community/">Community</a>
		</nav>
		<div class="social">
			<div>
				<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
				<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
				<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
			</div>
			<div>
				<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
				<a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
				<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
			</div>
			<div>
				<span>I wish this page</span>
				<input type="text" id="wishField" name="wishField" placeholder="enter your wish">
			</div>
		</div>
		<div id="miceType" class="center">&copy; 2016 Kubernetes</div>
	</main>
</footer>


<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
	.cse .gsc-control-cse, .gsc-control-cse, {
		padding: 0;
	}
	.gsc-control-cse table, .gsc-control-cse-en table {
		margin:0px !important;
	}

	.gsc-above-wrapper-area {
		border-bottom: 0;
	}
</style>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36037335-10', 'auto');
  ga('send', 'pageview');
</script>
<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
<!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->
</body>
</html>
