

<!Doctype html>
<html id="docs" class="Guides">


<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="canonical" href="http://kubernetes.io/docs/user-guide/downward-api/" />
	<link rel="shortcut icon" type="image/png" href="/images/favicon.png">
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href='https://fonts.googleapis.com/css?family=Roboto+Mono' type='text/css'>
	<link rel="stylesheet" href="/css/styles.css"/>
        <link rel="stylesheet" href="/css/jquery-ui.min.css">
        <link rel="stylesheet" href="/css/sweetalert.css">
	<script src="/js/jquery-2.2.0.min.js"></script>
        <script src="/js/jquery-ui.min.js"></script>
	<script src="/js/script.js"></script>
        <script src="/js/sweetalert.min.js"></script>
	<title>Kubernetes - Using the Downward API to Convey Pod Properties</title>
</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>
<header>
	<a href="/" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="/docs/" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a>
		<a href="/docs/hellonode/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
		<button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="/docs/hellonode/">Get Started</a></h3>
				<p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
			</div>
			<div class="nav-box">
				<h3><a href="/docs/">Documentation</a></h3>
				<p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
			</div>
			<div class="nav-box">
				<h3><a href="/community/">Community</a></h3>
				<p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
			</div>
			<div class="nav-box">
				<h3><a href="http://blog.kubernetes.io">Blog</a></h3>
				<p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
			</div>
		</main>
		<main data-auto-burger="primary">
			<div class="left">
				<h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
				<a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
			</div>

			<div class="right">
				<h5 class="github-invite">Explore the community</h5>
				<div class="social">
					<a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
					<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
					<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
					<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
					<a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
					<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
				</div>
			</div>
			<div class="clear" style="clear: both"></div>
		</main>
	</nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
	<h1>Guides</h1>
	<h5>How to get started, and achieve tasks, using Kubernetes</h5>
	<div id="vendorStrip" class="light-text">
		<ul>
			<li><a href="/docs/" class="YAH">GUIDES</a></li>
			<li><a href="/docs/reference" >REFERENCE</a></li>
			<li><a href="/docs/samples" >SAMPLES</a></li>
			<li><a href="/docs/troubleshooting/" >SUPPORT</a></li>
		</ul>
		<div id="searchBox">
			<input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
		</div>
	</div>
</section>

<section id="encyclopedia">
	<div id="docsToc">
        <div class="pi-accordion">
        
    <a class="item" data-title="Guides" href="/docs/"></a>
<div class="item" data-title="Getting Started">
  <div class="container">
    <a class="item" data-title="What is Kubernetes?" href="/docs/whatisk8s/"></a>
    <a class="item" data-title="Downloading or Building Kubernetes" href="/docs/getting-started-guides/binary_release/"></a>
    <a class="item" data-title="Hello World Walkthrough" href="/docs/hellonode/"></a>
    <a class="item" data-title="Online Training Course" href="https://www.udacity.com/course/scalable-microservices-with-kubernetes--ud615" target='_blank'></a>
  </div>
</div>
<div class="item" data-title="Accessing the Cluster">
  <div class="container">
    <a class="item" data-title="Installing and Setting up kubectl" href="/docs/user-guide/prereqs/"></a>
    <a class="item" data-title="Accessing Clusters" href="/docs/user-guide/accessing-the-cluster/"></a>
    <a class="item" data-title="Sharing Cluster Access with kubeconfig" href="/docs/user-guide/sharing-clusters/"></a>
    <a class="item" data-title="Authenticating Across Clusters with kubeconfig" href="/docs/user-guide/kubeconfig-file/"></a>
  </div>
</div>
    <a class="item" data-title="User Guide" href="/docs/user-guide/"></a>
    <a class="item" data-title="Web UI (Dashboard)" href="/docs/user-guide/ui/"></a>
<div class="item" data-title="Workload Deployment and Management">
  <div class="container">
    <a class="item" data-title="Launching, Exposing, and Killing Applications" href="/docs/user-guide/quick-start/"></a>
    <a class="item" data-title="Deploying Applications" href="/docs/user-guide/deploying-applications/"></a>
    <a class="item" data-title="Managing Resources" href="/docs/user-guide/managing-deployments/"></a>
    <a class="item" data-title="Replication Controller Operations" href="/docs/user-guide/replication-controller/operations/"></a>
    <a class="item" data-title="Resizing a Replication Controller" href="/docs/user-guide/resizing-a-replication-controller/"></a>
    <a class="item" data-title="Rolling Updates" href="/docs/user-guide/rolling-updates/"></a>
    <a class="item" data-title="Rolling Update Demo" href="/docs/user-guide/update-demo/"></a>
    <a class="item" data-title="Secrets Walkthrough" href="/docs/user-guide/secrets/walkthrough/"></a>
    <a class="item" data-title="Using ConfigMap" href="/docs/user-guide/configmap/"></a>
    <a class="item" data-title="Horizontal Pod Autoscaling" href="/docs/user-guide/horizontal-pod-autoscaling/walkthrough/"></a>
    <a class="item" data-title="Best Practices for Configuration" href="/docs/user-guide/config-best-practices/"></a>
    <a class="item" data-title="Using kubectl to Manage Resources" href="/docs/user-guide/working-with-resources/"></a>
    <a class="item" data-title="Garbage collection" href="/docs/user-guide/garbage-collector/"></a>
  </div>
</div>
<div class="item" data-title="Batch Jobs">
  <div class="container">
    <a class="item" data-title="Jobs" href="/docs/user-guide/jobs/"></a>
    <a class="item" data-title="Parallel Processing using Expansions" href="/docs/user-guide/jobs/expansions/"></a>
    <a class="item" data-title="Coarse Parallel Processing using a Work Queue" href="/docs/user-guide/jobs/work-queue-1/"></a>
    <a class="item" data-title="Fine Parallel Processing using a Work Queue" href="/docs/user-guide/jobs/work-queue-2/"></a>
  </div>
</div>
<div class="item" data-title="Service Discovery and Load Balancing">
  <div class="container">
    <a class="item" data-title="Connecting Applications with Services" href="/docs/user-guide/connecting-applications/"></a>
    <a class="item" data-title="Service Operations" href="/docs/user-guide/services/operations/"></a>
    <a class="item" data-title="Creating an External Load Balancer" href="/docs/user-guide/load-balancer/"></a>
    <a class="item" data-title="Configuring Your Cloud Provider's Firewalls" href="/docs/user-guide/services-firewalls/"></a>
    <a class="item" data-title="Cross-cluster Service Discovery using Federated Services" href="/docs/user-guide/federation/federated-services/"></a>
  </div>
</div>
<div class="item" data-title="Containers and Pods">
  <div class="container">
    <a class="item" data-title="Running Your First Containers" href="/docs/user-guide/simple-nginx/"></a>
    <a class="item" data-title="Creating Single-Container Pods" href="/docs/user-guide/pods/single-container/"></a>
    <a class="item" data-title="Creating Multi-Container Pods" href="/docs/user-guide/pods/multi-container/"></a>
    <a class="item" data-title="Configuring Containers" href="/docs/user-guide/configuring-containers/"></a>
    <a class="item" data-title="Working with Containers in Production" href="/docs/user-guide/production-pods/"></a>
    <a class="item" data-title="Commands and Capabilities" href="/docs/user-guide/containers/"></a>
    <a class="item" data-title="Using Environment Variables" href="/docs/user-guide/environment-guide/"></a>
    <a class="item" data-title="Managing Compute Resources" href="/docs/user-guide/compute-resources/"></a>
    <a class="item" data-title="The Lifecycle of a Pod" href="/docs/user-guide/pod-states/"></a>
    <a class="item" data-title="Checking Pod Health" href="/docs/user-guide/liveness/"></a>
    <a class="item" data-title="Container Lifecycle Hooks" href="/docs/user-guide/container-environment/"></a>
    <a class="item" data-title="Assigning Pods to Nodes" href="/docs/user-guide/node-selection/"></a>
    <a class="item" data-title="Using the Downward API to Convey Pod Properties" href="/docs/user-guide/downward-api/"></a>
    <a class="item" data-title="Downward API Volumes" href="/docs/user-guide/downward-api/volume"></a>
    <a class="item" data-title="Persistent Volumes Walkthrough" href="/docs/user-guide/persistent-volumes/walkthrough/"></a>
    <a class="item" data-title="Bootstrapping Pet Sets" href="/docs/user-guide/petset/bootstrapping/"></a>
  </div>
</div>
<div class="item" data-title="Monitoring, Logging, and Debugging Containers">
  <div class="container">
    <a class="item" data-title="Resource Usage Monitoring" href="/docs/user-guide/monitoring/"></a>
    <a class="item" data-title="Logging" href="/docs/getting-started-guides/logging/"></a>
    <a class="item" data-title="Logging with Elasticsearch and Kibana" href="/docs/getting-started-guides/logging-elasticsearch/"></a>
    <a class="item" data-title="Running Commands in a Container with kubectl exec" href="/docs/user-guide/getting-into-containers/"></a>
    <a class="item" data-title="Connect with Proxies" href="/docs/user-guide/connecting-to-applications-proxy/"></a>
    <a class="item" data-title="Connect with Port Forwarding" href="/docs/user-guide/connecting-to-applications-port-forward/"></a>
    <a class="item" data-title="Using Explorer to Examine the Runtime Environment" href="https://github.com/kubernetes/kubernetes/tree/release-1.3/examples/explorer" target='_blank'></a>
  </div>
</div>
<div class="item" data-title="Creating a Cluster">
  <div class="container">
    <a class="item" data-title="Picking the Right Solution" href="/docs/getting-started-guides/"></a>
<div class="item" data-title="Running Kubernetes on Your Local Machine">
  <div class="container">
    <a class="item" data-title="Running Kubernetes Locally via Minikube" href="/docs/getting-started-guides/minikube/"></a>
    <a class="item" data-title="Deprecated Alternatives" href="/docs/getting-started-guides/alternatives/"></a>
  </div>
</div>
<div class="item" data-title="Running Kubernetes on Turn-key Cloud Solutions">
  <div class="container">
    <a class="item" data-title="Running Kubernetes on Google Container Engine" href="https://cloud.google.com/container-engine/docs/before-you-begin/" target='_blank'></a>
    <a class="item" data-title="Running Kubernetes on Google Compute Engine" href="/docs/getting-started-guides/gce/"></a>
    <a class="item" data-title="Running Kubernetes on AWS EC2" href="/docs/getting-started-guides/aws/"></a>
    <a class="item" data-title="Running Kubernetes on Azure (Weave-based)" href="/docs/getting-started-guides/coreos/azure/"></a>
    <a class="item" data-title="Running Kubernetes on Azure (Flannel-based)" href="/docs/getting-started-guides/azure/"></a>
    <a class="item" data-title="Running Kubernetes on CenturyLink Cloud" href="/docs/getting-started-guides/clc/"></a>
  </div>
</div>
<div class="item" data-title="Running Kubernetes on Custom Solutions">
  <div class="container">
    <a class="item" data-title="Creating a Custom Cluster from Scratch" href="/docs/getting-started-guides/scratch/"></a>
<div class="item" data-title="Custom Cloud Solutions">
  <div class="container">
    <a class="item" data-title="CoreOS on AWS or GCE" href="/docs/getting-started-guides/coreos/"></a>
    <a class="item" data-title="Ubuntu on AWS or Joyent" href="/docs/getting-started-guides/juju/"></a>
    <a class="item" data-title="CoreOS on Rackspace" href="/docs/getting-started-guides/rackspace/"></a>
  </div>
</div>
<div class="item" data-title="On-Premise VMs">
  <div class="container">
    <a class="item" data-title="CoreOS on Vagrant" href="/docs/getting-started-guides/coreos/"></a>
    <a class="item" data-title="Cloudstack" href="/docs/getting-started-guides/cloudstack/"></a>
    <a class="item" data-title="VMware vSphere" href="/docs/getting-started-guides/vsphere/"></a>
    <a class="item" data-title="VMware Photon Controller" href="/docs/getting-started-guides/photon-controller/"></a>
    <a class="item" data-title="Juju" href="/docs/getting-started-guides/juju/"></a>
    <a class="item" data-title="DCOS" href="/docs/getting-started-guides/dcos/"></a>
    <a class="item" data-title="CoreOS on libvirt" href="/docs/getting-started-guides/libvirt-coreos/"></a>
    <a class="item" data-title="oVirt" href="/docs/getting-started-guides/ovirt/"></a>
    <a class="item" data-title="OpenStack Heat" href="/docs/getting-started-guides/openstack-heat/"></a>
    <a class="item" data-title="CoreOS on Multinode Cluster" href="/docs/getting-started-guides/coreos/coreos_multinode_cluster/"></a>
    <a class="item" data-title="Fedora With Calico Networking" href="/docs/getting-started-guides/fedora/fedora-calico/"></a>
<div class="item" data-title="rkt">
  <div class="container">
    <a class="item" data-title="Running Kubernetes with rkt" href="/docs/getting-started-guides/rkt/"></a>
    <a class="item" data-title="Known Issues when Using rkt" href="/docs/getting-started-guides/rkt/notes/"></a>
  </div>
</div>
    <a class="item" data-title="Kubernetes on Mesos" href="/docs/getting-started-guides/mesos/"></a>
    <a class="item" data-title="Kubernetes on Mesos on Docker" href="/docs/getting-started-guides/mesos-docker/"></a>
  </div>
</div>
<div class="item" data-title="Bare Metal">
  <div class="container">
    <a class="item" data-title="Offline" href="/docs/getting-started-guides/coreos/bare_metal_offline/"></a>
    <a class="item" data-title="Fedora via Ansible" href="/docs/getting-started-guides/fedora/fedora_ansible_config/"></a>
    <a class="item" data-title="Fedora (Single Node)" href="/docs/getting-started-guides/fedora/fedora_manual_config/"></a>
    <a class="item" data-title="Fedora (Multi Node)" href="/docs/getting-started-guides/fedora/flannel_multi_node_cluster/"></a>
    <a class="item" data-title="CentOS" href="/docs/getting-started-guides/centos/centos_manual_config/"></a>
    <a class="item" data-title="CoreOS" href="/docs/getting-started-guides/coreos"></a>
    <a class="item" data-title="CoreOS with Calico" href="/docs/getting-started-guides/coreos/bare_metal_calico/"></a>
    <a class="item" data-title="Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    <a class="item" data-title="Ubuntu Nodes with Calico" href="/docs/getting-started-guides/ubuntu-calico/"></a>
  </div>
</div>
  </div>
</div>
    <a class="item" data-title="Portable Multi-Node Cluster" href="/docs/getting-started-guides/docker-multinode/"></a>
    <a class="item" data-title="Building Large Clusters" href="/docs/admin/cluster-large/"></a>
    <a class="item" data-title="Running in Multiple Zones" href="/docs/admin/multiple-zones/"></a>
    <a class="item" data-title="Building High-Availability Clusters" href="/docs/admin/high-availability/"></a>
  </div>
</div>
<div class="item" data-title="Administering Clusters">
  <div class="container">
    <a class="item" data-title="Admin Guide" href="/docs/admin/"></a>
    <a class="item" data-title="Cluster Management Guide" href="/docs/admin/cluster-management/"></a>
    <a class="item" data-title="Sharing a Cluster with Namespaces" href="/docs/admin/namespaces/"></a>
    <a class="item" data-title="Namespaces Walkthrough" href="/docs/admin/namespaces/walkthrough/"></a>
    <a class="item" data-title="Setting Pod CPU and Memory Limits" href="/docs/admin/limitrange/"></a>
    <a class="item" data-title="Understanding Resource Quotas" href="/docs/admin/resourcequota/"></a>
    <a class="item" data-title="Applying Resource Quotas and Limits" href="/docs/admin/resourcequota/walkthrough/"></a>
    <a class="item" data-title="Kubernetes Components" href="/docs/admin/cluster-components/"></a>
    <a class="item" data-title="Configuring Kubernetes Use of etcd" href="/docs/admin/etcd/"></a>
    <a class="item" data-title="Federating Clusters" href="/docs/admin/federation/"></a>
    <a class="item" data-title="Using Multiple Clusters" href="/docs/admin/multi-cluster/"></a>
    <a class="item" data-title="Changing Cluster Size" href="https://github.com/kubernetes/kubernetes/wiki/User-FAQ#how-do-i-change-the-size-of-my-cluster/" target='_blank'></a>
    <a class="item" data-title="Configuring Multiple Schedulers" href="/docs/admin/multiple-schedulers/"></a>
    <a class="item" data-title="Networking in Kubernetes" href="/docs/admin/networking/"></a>
    <a class="item" data-title="Using DNS Pods and Services" href="/docs/admin/dns/"></a>
    <a class="item" data-title="Setting Up and Configuring DNS" href="https://github.com/kubernetes/kubernetes/tree/release-1.3/examples/cluster-dns" target='_blank'></a>
    <a class="item" data-title="Master <-> Node Communication" href="/docs/admin/master-node-communication/"></a>
    <a class="item" data-title="Network Plugins" href="/docs/admin/network-plugins/"></a>
    <a class="item" data-title="Static Pods" href="/docs/admin/static-pods/"></a>
    <a class="item" data-title="Configuring kubelet Garbage Collection" href="/docs/admin/garbage-collection/"></a>
    <a class="item" data-title="Configuring Out Of Resource Handling" href="/docs/admin/out-of-resource/"></a>
    <a class="item" data-title="Configuring Kubernetes with Salt" href="/docs/admin/salt/"></a>
    <a class="item" data-title="Monitoring Node Health" href="/docs/admin/node-problem/"></a>
  </div>
</div>
        </div> <!-- /pi-accordion -->
		<button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
	</div> <!-- /docsToc -->
	<div id="docsContent">
        <p><a href="/editdocs#docs/user-guide/downward-api/index.md" id="editPageButton">Edit This Page</a></p>
    	<h1>Using the Downward API to Convey Pod Properties</h1>
		<p>It is sometimes useful for a container to have information about itself, but we
want to be careful not to over-couple containers to Kubernetes. The downward
API allows containers to consume information about themselves or the system and
expose that information how they want it, without necessarily coupling to the
Kubernetes client or REST API.</p>

<p>An example of this is a “legacy” app that is already written assuming
that a particular environment variable will hold a unique identifier.  While it
is often possible to “wrap” such applications, this is tedious and error prone,
and violates the goal of low coupling.  Instead, the user should be able to use
the Pod’s name, for example, and inject it into this well-known variable.</p>

<h2 id="capabilities">Capabilities</h2>

<p>The following information is available to a <code class="highlighter-rouge">Pod</code> through the downward API:</p>

<ul>
  <li>The pod’s name</li>
  <li>The pod’s namespace</li>
  <li>The pod’s IP</li>
  <li>A container’s cpu limit</li>
  <li>A container’s cpu request</li>
  <li>A container’s memory limit</li>
  <li>A container’s memory request</li>
</ul>

<p>More information will be exposed through this same API over time.</p>

<h2 id="exposing-pod-information-into-a-container">Exposing pod information into a container</h2>

<p>Containers consume information from the downward API using environment
variables or using a volume plugin.</p>

<h2 id="environment-variables">Environment variables</h2>

<p>Most environment variables in the Kubernetes API use the <code class="highlighter-rouge">value</code> field to carry
simple values.  However, the alternate <code class="highlighter-rouge">valueFrom</code> field allows you to specify
a <code class="highlighter-rouge">fieldRef</code> to select fields from the pod’s definition, and a <code class="highlighter-rouge">resourceFieldRef</code>
to select fields from one of its container’s definition.</p>

<p>The <code class="highlighter-rouge">fieldRef</code> field is a structure that has an <code class="highlighter-rouge">apiVersion</code> field and a <code class="highlighter-rouge">fieldPath</code>
field.  The <code class="highlighter-rouge">fieldPath</code> field is an expression designating a field of the pod.  The
<code class="highlighter-rouge">apiVersion</code> field is the version of the API schema that the <code class="highlighter-rouge">fieldPath</code> is
written in terms of.  If the <code class="highlighter-rouge">apiVersion</code> field is not specified it is
defaulted to the API version of the enclosing object.</p>

<p>The <code class="highlighter-rouge">fieldRef</code> is evaluated and the resulting value is used as the value for
the environment variable.  This allows users to publish their pod’s name in any
environment variable they want.</p>

<p>The <code class="highlighter-rouge">resourceFieldRef</code> is a structure that has a <code class="highlighter-rouge">containerName</code> field, a <code class="highlighter-rouge">resource</code>
field, and a <code class="highlighter-rouge">divisor</code> field. The <code class="highlighter-rouge">containerName</code> is the name of a container,
whose resource (cpu or memory) information is to be exposed. The <code class="highlighter-rouge">containerName</code> is
optional for environment variables and defaults to the current container. The
<code class="highlighter-rouge">resource</code> field is an expression designating a resource in a container, and the <code class="highlighter-rouge">divisor</code>
field specifies an output format of the resource being exposed. If the <code class="highlighter-rouge">divisor</code>
is not specified, it defaults to “1” for cpu and memory. The table shows possible
values for cpu and memory resources for <code class="highlighter-rouge">resource</code> and <code class="highlighter-rouge">divisor</code> settings:</p>

<table>
  <thead>
    <tr>
      <th>Setting</th>
      <th>Cpu</th>
      <th>Memory</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>resource</td>
      <td>limits.cpu, requests.cpu</td>
      <td>limits.memory, requests.memory</td>
    </tr>
    <tr>
      <td>divisor</td>
      <td>1(cores), 1m(millicores)</td>
      <td>1(bytes), 1k(kilobytes), 1M(megabytes), 1G(gigabytes), 1T(terabytes), 1P(petabytes), 1E(exabytes), 1Ki(kibibyte), 1Mi(mebibyte), 1Gi(gibibyte), 1Ti(tebibyte), 1Pi(pebibyte), 1Ei(exbibyte)</td>
    </tr>
  </tbody>
</table>

<h3 id="example">Example</h3>

<p>This is an example of a pod that consumes its name and namespace via the
downward API:</p>

<table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/kubernetes/kubernetes.github.io/release-1.3/docs/user-guide/downward-api/dapi-pod.yaml" download="dapi-pod.yaml"><code>dapi-pod.yaml</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('dapi-pod.yaml')" title="Copy dapi-pod.yaml to clipboard" /></th></tr></thead>
<tr><td>
<div id="dapi-pod.yaml" class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="s">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="s">metadata</span><span class="pi">:</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">dapi-test-pod</span>
<span class="s">spec</span><span class="pi">:</span>
  <span class="s">containers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">test-container</span>
      <span class="s">image</span><span class="pi">:</span> <span class="s">gcr.io/google_containers/busybox</span>
      <span class="s">command</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">/bin/sh"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">-c"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">env"</span> <span class="pi">]</span>
      <span class="s">env</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">MY_POD_NAME</span>
          <span class="s">valueFrom</span><span class="pi">:</span>
            <span class="s">fieldRef</span><span class="pi">:</span>
              <span class="s">fieldPath</span><span class="pi">:</span> <span class="s">metadata.name</span>
        <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">MY_POD_NAMESPACE</span>
          <span class="s">valueFrom</span><span class="pi">:</span>
            <span class="s">fieldRef</span><span class="pi">:</span>
              <span class="s">fieldPath</span><span class="pi">:</span> <span class="s">metadata.namespace</span>
        <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">MY_POD_IP</span>
          <span class="s">valueFrom</span><span class="pi">:</span>
            <span class="s">fieldRef</span><span class="pi">:</span>
              <span class="s">fieldPath</span><span class="pi">:</span> <span class="s">status.podIP</span>
  <span class="s">restartPolicy</span><span class="pi">:</span> <span class="s">Never</span>
</code></pre>
</div>
</td></tr></table>

<p>This is an example of a pod that consumes its container’s resources via the downward API:</p>

<table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/kubernetes/kubernetes.github.io/release-1.3/docs/user-guide/downward-api/dapi-container-resources.yaml" download="dapi-container-resources.yaml"><code>dapi-container-resources.yaml</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('dapi-container-resources.yaml')" title="Copy dapi-container-resources.yaml to clipboard" /></th></tr></thead>
<tr><td>
<div id="dapi-container-resources.yaml" class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="s">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="s">metadata</span><span class="pi">:</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">dapi-test-pod</span>
<span class="s">spec</span><span class="pi">:</span>
  <span class="s">containers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">test-container</span>
      <span class="s">image</span><span class="pi">:</span> <span class="s">gcr.io/google_containers/busybox:1.24</span>
      <span class="s">command</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">/bin/sh"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">-c"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">env"</span> <span class="pi">]</span>
      <span class="s">resources</span><span class="pi">:</span>
        <span class="s">requests</span><span class="pi">:</span>
          <span class="s">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">32Mi"</span>
          <span class="s">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">125m"</span>
        <span class="s">limits</span><span class="pi">:</span>
          <span class="s">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">64Mi"</span>
          <span class="s">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">250m"</span>
      <span class="s">env</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">MY_CPU_REQUEST</span>
          <span class="s">valueFrom</span><span class="pi">:</span>
            <span class="s">resourceFieldRef</span><span class="pi">:</span>
              <span class="s">resource</span><span class="pi">:</span> <span class="s">requests.cpu</span>
        <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">MY_CPU_LIMIT</span>
          <span class="s">valueFrom</span><span class="pi">:</span>
            <span class="s">resourceFieldRef</span><span class="pi">:</span>
              <span class="s">resource</span><span class="pi">:</span> <span class="s">limits.cpu</span>
        <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">MY_MEM_REQUEST</span>
          <span class="s">valueFrom</span><span class="pi">:</span>
            <span class="s">resourceFieldRef</span><span class="pi">:</span>
              <span class="s">resource</span><span class="pi">:</span> <span class="s">requests.memory</span>
        <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">MY_MEM_LIMIT</span>
          <span class="s">valueFrom</span><span class="pi">:</span>
            <span class="s">resourceFieldRef</span><span class="pi">:</span>
              <span class="s">resource</span><span class="pi">:</span> <span class="s">limits.memory</span>
  <span class="s">restartPolicy</span><span class="pi">:</span> <span class="s">Never</span>
</code></pre>
</div>
</td></tr></table>

<h2 id="downward-api-volume">Downward API volume</h2>

<p>Using a similar syntax it’s possible to expose pod information to containers using plain text files.
Downward API are dumped to a mounted volume. This is achieved using a <code class="highlighter-rouge">downwardAPI</code>
volume type and the different items represent the files to be created. <code class="highlighter-rouge">fieldPath</code> references the field to be exposed.
For exposing a container’s resources limits and requests, <code class="highlighter-rouge">containerName</code> must be specified with <code class="highlighter-rouge">resourceFieldRef</code>.</p>

<p>Downward API volume permits to store more complex data like <a href="/docs/user-guide/labels"><code class="highlighter-rouge">metadata.labels</code></a> and <a href="/docs/user-guide/annotations"><code class="highlighter-rouge">metadata.annotations</code></a>. Currently key/value pair set fields are saved using <code class="highlighter-rouge">key="value"</code> format:</p>

<div class="language-conf highlighter-rouge"><pre class="highlight"><code><span class="n">key1</span>=<span class="s2">"value1"</span>
<span class="n">key2</span>=<span class="s2">"value2"</span>
</code></pre>
</div>

<p>In future, it will be possible to specify an output format option.</p>

<p>Downward API volumes can expose:</p>

<ul>
  <li>The pod’s name</li>
  <li>The pod’s namespace</li>
  <li>The pod’s labels</li>
  <li>The pod’s annotations</li>
  <li>A container’s cpu limit</li>
  <li>A container’s cpu request</li>
  <li>A container’s memory limit</li>
  <li>A container’s memory request</li>
</ul>

<p>The downward API volume refreshes its data in step with the kubelet refresh loop. When labels will be modifiable on the fly without respawning the pod containers will be able to detect changes through mechanisms such as <a href="https://en.wikipedia.org/wiki/Inotify">inotify</a>.</p>

<p>In future, it will be possible to specify a specific annotation or label.</p>

<h3 id="example-1">Example</h3>

<p>This is an example of a pod that consumes its labels and annotations via the downward API volume, labels and annotations are dumped in <code class="highlighter-rouge">/etc/labels</code> and in <code class="highlighter-rouge">/etc/annotations</code>, respectively:</p>

<table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/kubernetes/kubernetes.github.io/release-1.3/docs/user-guide/downward-api/volume/dapi-volume.yaml" download="volume/dapi-volume.yaml"><code>volume/dapi-volume.yaml</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('volume/dapi-volume.yaml')" title="Copy volume/dapi-volume.yaml to clipboard" /></th></tr></thead>
<tr><td>
<div id="volume/dapi-volume.yaml" class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="s">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="s">metadata</span><span class="pi">:</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">kubernetes-downwardapi-volume-example</span>
  <span class="s">labels</span><span class="pi">:</span>
    <span class="s">zone</span><span class="pi">:</span> <span class="s">us-est-coast</span>
    <span class="s">cluster</span><span class="pi">:</span> <span class="s">test-cluster1</span>
    <span class="s">rack</span><span class="pi">:</span> <span class="s">rack-22</span>
  <span class="s">annotations</span><span class="pi">:</span>
    <span class="s">build</span><span class="pi">:</span> <span class="s">two</span>
    <span class="s">builder</span><span class="pi">:</span> <span class="s">john-doe</span>
<span class="s">spec</span><span class="pi">:</span>
  <span class="s">containers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">client-container</span>
      <span class="s">image</span><span class="pi">:</span> <span class="s">gcr.io/google_containers/busybox</span>
      <span class="s">command</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">sh"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">-c"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">while</span><span class="nv"> </span><span class="s">true;</span><span class="nv"> </span><span class="s">do</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">[[</span><span class="nv"> </span><span class="s">-e</span><span class="nv"> </span><span class="s">/etc/labels</span><span class="nv"> </span><span class="s">]];</span><span class="nv"> </span><span class="s">then</span><span class="nv"> </span><span class="s">cat</span><span class="nv"> </span><span class="s">/etc/labels;</span><span class="nv"> </span><span class="s">fi;</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">[[</span><span class="nv"> </span><span class="s">-e</span><span class="nv"> </span><span class="s">/etc/annotations</span><span class="nv"> </span><span class="s">]];</span><span class="nv"> </span><span class="s">then</span><span class="nv"> </span><span class="s">cat</span><span class="nv"> </span><span class="s">/etc/annotations;</span><span class="nv"> </span><span class="s">fi;</span><span class="nv"> </span><span class="s">sleep</span><span class="nv"> </span><span class="s">5;</span><span class="nv"> </span><span class="s">done"</span><span class="pi">]</span>
      <span class="s">volumeMounts</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">podinfo</span>
          <span class="s">mountPath</span><span class="pi">:</span> <span class="s">/etc</span>
          <span class="s">readOnly</span><span class="pi">:</span> <span class="s">false</span>
  <span class="s">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">podinfo</span>
      <span class="s">downwardAPI</span><span class="pi">:</span>
        <span class="s">items</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">labels"</span>
            <span class="s">fieldRef</span><span class="pi">:</span>
              <span class="s">fieldPath</span><span class="pi">:</span> <span class="s">metadata.labels</span>
          <span class="pi">-</span> <span class="s">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">annotations"</span>
            <span class="s">fieldRef</span><span class="pi">:</span>
              <span class="s">fieldPath</span><span class="pi">:</span> <span class="s">metadata.annotations</span>
</code></pre>
</div>
</td></tr></table>

<p>This is an example of a pod that consumes its container’s resources via the downward API volume.</p>

<table class="includecode"><thead><tr><th><a href="https://raw.githubusercontent.com/kubernetes/kubernetes.github.io/release-1.3/docs/user-guide/downward-api/volume/dapi-volume-resources.yaml" download="volume/dapi-volume-resources.yaml"><code>volume/dapi-volume-resources.yaml</code></a><img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('volume/dapi-volume-resources.yaml')" title="Copy volume/dapi-volume-resources.yaml to clipboard" /></th></tr></thead>
<tr><td>
<div id="volume/dapi-volume-resources.yaml" class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="s">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="s">metadata</span><span class="pi">:</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">kubernetes-downwardapi-volume-example</span>
<span class="s">spec</span><span class="pi">:</span>
  <span class="s">containers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">client-container</span>
      <span class="s">image</span><span class="pi">:</span> <span class="s">gcr.io/google_containers/busybox:1.24</span>
      <span class="s">command</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">sh"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">-c"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">while</span><span class="nv"> </span><span class="s">true;</span><span class="nv"> </span><span class="s">do</span><span class="nv"> </span><span class="s">echo;</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">[[</span><span class="nv"> </span><span class="s">-e</span><span class="nv"> </span><span class="s">/etc/cpu_limit</span><span class="nv"> </span><span class="s">]];</span><span class="nv"> </span><span class="s">then</span><span class="nv"> </span><span class="s">cat</span><span class="nv"> </span><span class="s">/etc/cpu_limit;</span><span class="nv"> </span><span class="s">fi;</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">[[</span><span class="nv"> </span><span class="s">-e</span><span class="nv"> </span><span class="s">/etc/cpu_request</span><span class="nv"> </span><span class="s">]];</span><span class="nv"> </span><span class="s">then</span><span class="nv"> </span><span class="s">cat</span><span class="nv"> </span><span class="s">/etc/cpu_request;</span><span class="nv"> </span><span class="s">fi;</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">[[</span><span class="nv"> </span><span class="s">-e</span><span class="nv"> </span><span class="s">/etc/mem_limit</span><span class="nv"> </span><span class="s">]];</span><span class="nv"> </span><span class="s">then</span><span class="nv"> </span><span class="s">cat</span><span class="nv"> </span><span class="s">/etc/mem_limit;</span><span class="nv"> </span><span class="s">fi;</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">[[</span><span class="nv"> </span><span class="s">-e</span><span class="nv"> </span><span class="s">/etc/mem_request</span><span class="nv"> </span><span class="s">]];</span><span class="nv"> </span><span class="s">then</span><span class="nv"> </span><span class="s">cat</span><span class="nv"> </span><span class="s">/etc/mem_request;</span><span class="nv"> </span><span class="s">fi;</span><span class="nv"> </span><span class="s">sleep</span><span class="nv"> </span><span class="s">5;</span><span class="nv"> </span><span class="s">done"</span><span class="pi">]</span>
      <span class="s">resources</span><span class="pi">:</span>
        <span class="s">requests</span><span class="pi">:</span>
          <span class="s">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">32Mi"</span>
          <span class="s">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">125m"</span>
        <span class="s">limits</span><span class="pi">:</span>
          <span class="s">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">64Mi"</span>
          <span class="s">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">250m"</span>
      <span class="s">volumeMounts</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">podinfo</span>
          <span class="s">mountPath</span><span class="pi">:</span> <span class="s">/etc</span>
          <span class="s">readOnly</span><span class="pi">:</span> <span class="s">false</span>
  <span class="s">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">podinfo</span>
      <span class="s">downwardAPI</span><span class="pi">:</span>
        <span class="s">items</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">cpu_limit"</span>
            <span class="s">resourceFieldRef</span><span class="pi">:</span>
              <span class="s">containerName</span><span class="pi">:</span> <span class="s">client-container</span>
              <span class="s">resource</span><span class="pi">:</span> <span class="s">limits.cpu</span>
          <span class="pi">-</span> <span class="s">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">cpu_request"</span>
            <span class="s">resourceFieldRef</span><span class="pi">:</span>
              <span class="s">containerName</span><span class="pi">:</span> <span class="s">client-container</span>
              <span class="s">resource</span><span class="pi">:</span> <span class="s">requests.cpu</span>
          <span class="pi">-</span> <span class="s">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">mem_limit"</span>
            <span class="s">resourceFieldRef</span><span class="pi">:</span>
              <span class="s">containerName</span><span class="pi">:</span> <span class="s">client-container</span>
              <span class="s">resource</span><span class="pi">:</span> <span class="s">limits.memory</span>
          <span class="pi">-</span> <span class="s">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">mem_request"</span>
            <span class="s">resourceFieldRef</span><span class="pi">:</span>
              <span class="s">containerName</span><span class="pi">:</span> <span class="s">client-container</span>
              <span class="s">resource</span><span class="pi">:</span> <span class="s">requests.memory</span>
</code></pre>
</div>
</td></tr></table>

<p>Some more thorough examples:</p>

<ul>
  <li><a href="/docs/user-guide/environment-guide/">environment variables</a></li>
  <li><a href="/docs/user-guide/downward-api/">downward API</a></li>
</ul>

<h2 id="default-values-for-container-resource-limits">Default values for container resource limits</h2>

<p>If cpu and memory limits are not specified for a container, the downward API will default to node’s cpu and memory capacities.</p>

        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/user-guide/downward-api/index.md?pixel" alt="Analytics" /></a>
        <div id="pd_rating_holder_8345992"></div>
		<script type="text/javascript">
	        PDRTJS_settings_8345992 = {
		        "id" : "8345992",
		        "unique_id" : "/docs/user-guide/downward-api/",
		        "title" : "Using the Downward API to Convey Pod Properties",
		        "permalink" : "http://kubernetes.github.io/docs/user-guide/downward-api/"
	        };
	        (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
	</div>
</section>

<footer>
	<main class="light-text">
		<nav>
			<a href="/docs/hellonode/">Get Started</a>
			<a href="/docs/">Documentation</a>
			<a href="http://blog.kubernetes.io/">Blog</a>
			<a href="/community/">Community</a>
		</nav>
		<div class="social">
			<div>
				<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
				<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
				<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
			</div>
			<div>
				<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
				<a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
				<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
			</div>
			<div>
				<span>I wish this page</span>
				<input type="text" id="wishField" name="wishField" placeholder="enter your wish">
			</div>
		</div>
		<div id="miceType" class="center">&copy; 2016 Kubernetes</div>
	</main>
</footer>


<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
	.cse .gsc-control-cse, .gsc-control-cse, {
		padding: 0;
	}
	.gsc-control-cse table, .gsc-control-cse-en table {
		margin:0px !important;
	}

	.gsc-above-wrapper-area {
		border-bottom: 0;
	}
</style>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36037335-10', 'auto');
  ga('send', 'pageview');
</script>
<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
<!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->
</body>
</html>
