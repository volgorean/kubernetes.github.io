

<!Doctype html>
<html id="docs" class="Reference Documentation">


<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="canonical" href="http://kubernetes.io/docs/user-guide/labels/" />
	<link rel="shortcut icon" type="image/png" href="/images/favicon.png">
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href='https://fonts.googleapis.com/css?family=Roboto+Mono' type='text/css'>
	<link rel="stylesheet" href="/css/styles.css"/>
        <link rel="stylesheet" href="/css/jquery-ui.min.css">
        <link rel="stylesheet" href="/css/sweetalert.css">
	<script src="/js/jquery-2.2.0.min.js"></script>
        <script src="/js/jquery-ui.min.js"></script>
	<script src="/js/script.js"></script>
        <script src="/js/sweetalert.min.js"></script>
	<title>Kubernetes - Labels and Selectors</title>
</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>
<header>
	<a href="/" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="/docs/" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a>
		<a href="/docs/hellonode/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
		<button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="/docs/hellonode/">Get Started</a></h3>
				<p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
			</div>
			<div class="nav-box">
				<h3><a href="/docs/">Documentation</a></h3>
				<p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
			</div>
			<div class="nav-box">
				<h3><a href="/community/">Community</a></h3>
				<p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
			</div>
			<div class="nav-box">
				<h3><a href="http://blog.kubernetes.io">Blog</a></h3>
				<p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
			</div>
		</main>
		<main data-auto-burger="primary">
			<div class="left">
				<h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
				<a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
			</div>

			<div class="right">
				<h5 class="github-invite">Explore the community</h5>
				<div class="social">
					<a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
					<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
					<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
					<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
					<a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
					<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
				</div>
			</div>
			<div class="clear" style="clear: both"></div>
		</main>
	</nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
	<h1>Reference Documentation</h1>
	<h5>Design docs, concept definitions, and references for APIs and CLIs.</h5>
	<div id="vendorStrip" class="light-text">
		<ul>
			<li><a href="/docs/" >GUIDES</a></li>
			<li><a href="/docs/reference" class="YAH">REFERENCE</a></li>
			<li><a href="/docs/samples" >SAMPLES</a></li>
			<li><a href="/docs/troubleshooting/" >SUPPORT</a></li>
		</ul>
		<div id="searchBox">
			<input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
		</div>
	</div>
</section>

<section id="encyclopedia">
	<div id="docsToc">
        <div class="pi-accordion">
        
    <a class="item" data-title="Reference Documentation" href="/docs/reference/"></a>
<div class="item" data-title="Kubernetes API">
  <div class="container">
    <a class="item" data-title="Kubernetes API Overview" href="/docs/api/"></a>
<div class="item" data-title="Accessing the API">
  <div class="container">
    <a class="item" data-title="Overview" href="/docs/admin/accessing-the-api/"></a>
    <a class="item" data-title="Authenticating" href="/docs/admin/authentication/"></a>
    <a class="item" data-title="Using Authorization Plugins" href="/docs/admin/authorization/"></a>
    <a class="item" data-title="Using Admission Controllers" href="/docs/admin/admission-controllers/"></a>
    <a class="item" data-title="Managing Service Accounts" href="/docs/admin/service-accounts-admin/"></a>
  </div>
</div>
    <a class="item" data-title="Kubernetes API Operations" href="/docs/api-reference/v1/operations/"></a>
    <a class="item" data-title="Kubernetes API Definitions" href="/docs/api-reference/v1/definitions/"></a>
    <a class="item" data-title="Kubernetes API Swagger Spec" href="/kubernetes/third_party/swagger-ui/"></a>
  </div>
</div>
<div class="item" data-title="Autoscaling API">
  <div class="container">
    <a class="item" data-title="Autoscaling API Operations" href="/docs/api-reference/autoscaling/v1/operations/"></a>
    <a class="item" data-title="Autoscaling API Definitions" href="/docs/api-reference/autoscaling/v1/definitions/"></a>
  </div>
</div>
<div class="item" data-title="Batch API">
  <div class="container">
    <a class="item" data-title="Batch API Operations" href="/docs/api-reference/batch/v1/operations/"></a>
    <a class="item" data-title="Batch API Definitions" href="/docs/api-reference/batch/v1/definitions/"></a>
  </div>
</div>
<div class="item" data-title="Extensions API">
  <div class="container">
    <a class="item" data-title="Extensions API Operations" href="/docs/api-reference/extensions/v1beta1/operations/"></a>
    <a class="item" data-title="Extensions API Definitions" href="/docs/api-reference/extensions/v1beta1/definitions/"></a>
  </div>
</div>
<div class="item" data-title="kubectl CLI">
  <div class="container">
    <a class="item" data-title="kubectl Overview" href="/docs/user-guide/kubectl-overview/"></a>
    <a class="item" data-title="kubectl for Docker Users" href="/docs/user-guide/docker-cli-to-kubectl/"></a>
    <a class="item" data-title="kubectl Usage Conventions" href="/docs/user-guide/kubectl-conventions/"></a>
    <a class="item" data-title="JSONpath Support" href="/docs/user-guide/jsonpath/"></a>
    <a class="item" data-title="kubectl Cheat Sheet" href="/docs/user-guide/kubectl-cheatsheet/"></a>
<div class="item" data-title="kubectl Commands">
  <div class="container">
    <a class="item" data-title="kubectl" href="/docs/user-guide/kubectl/kubectl/"></a>
    <a class="item" data-title="kubectl annotate" href="/docs/user-guide/kubectl/kubectl_annotate/"></a>
    <a class="item" data-title="kubectl api-versions" href="/docs/user-guide/kubectl/kubectl_api-versions/"></a>
    <a class="item" data-title="kubectl apply" href="/docs/user-guide/kubectl/kubectl_apply/"></a>
    <a class="item" data-title="kubectl attach" href="/docs/user-guide/kubectl/kubectl_attach/"></a>
    <a class="item" data-title="kubectl autoscale" href="/docs/user-guide/kubectl/kubectl_autoscale/"></a>
    <a class="item" data-title="kubectl cluster-info" href="/docs/user-guide/kubectl/kubectl_cluster-info/"></a>
    <a class="item" data-title="kubectl config" href="/docs/user-guide/kubectl/kubectl_config/"></a>
    <a class="item" data-title="kubectl config current-context" href="/docs/user-guide/kubectl/kubectl_config_current-context/"></a>
    <a class="item" data-title="kubectl config set-cluster" href="/docs/user-guide/kubectl/kubectl_config_set-cluster/"></a>
    <a class="item" data-title="kubectl config set-context" href="/docs/user-guide/kubectl/kubectl_config_set-context/"></a>
    <a class="item" data-title="kubectl config set-credentials" href="/docs/user-guide/kubectl/kubectl_config_set-credentials/"></a>
    <a class="item" data-title="kubectl config set" href="/docs/user-guide/kubectl/kubectl_config_set/"></a>
    <a class="item" data-title="kubectl config unset" href="/docs/user-guide/kubectl/kubectl_config_unset/"></a>
    <a class="item" data-title="kubectl config use-context" href="/docs/user-guide/kubectl/kubectl_config_use-context/"></a>
    <a class="item" data-title="kubectl config view" href="/docs/user-guide/kubectl/kubectl_config_view/"></a>
    <a class="item" data-title="kubectl convert" href="/docs/user-guide/kubectl/kubectl_convert/"></a>
    <a class="item" data-title="kubectl cordon" href="/docs/user-guide/kubectl/kubectl_cordon/"></a>
    <a class="item" data-title="kubectl create" href="/docs/user-guide/kubectl/kubectl_create/"></a>
    <a class="item" data-title="kubectl create configmap" href="/docs/user-guide/kubectl/kubectl_create_configmap/"></a>
    <a class="item" data-title="kubectl create namespace" href="/docs/user-guide/kubectl/kubectl_create_namespace/"></a>
    <a class="item" data-title="kubectl create secret docker-registry" href="/docs/user-guide/kubectl/kubectl_create_secret_docker-registry/"></a>
    <a class="item" data-title="kubectl create secret" href="/docs/user-guide/kubectl/kubectl_create_secret/"></a>
    <a class="item" data-title="kubectl create secret generic" href="/docs/user-guide/kubectl/kubectl_create_secret_generic/"></a>
    <a class="item" data-title="kubectl create serviceaccount" href="/docs/user-guide/kubectl/kubectl_create_serviceaccount/"></a>
    <a class="item" data-title="kubectl delete" href="/docs/user-guide/kubectl/kubectl_delete/"></a>
    <a class="item" data-title="kubectl describe" href="/docs/user-guide/kubectl/kubectl_describe/"></a>
    <a class="item" data-title="kubectl drain" href="/docs/user-guide/kubectl/kubectl_drain/"></a>
    <a class="item" data-title="kubectl edit" href="/docs/user-guide/kubectl/kubectl_edit/"></a>
    <a class="item" data-title="kubectl exec" href="/docs/user-guide/kubectl/kubectl_exec/"></a>
    <a class="item" data-title="kubectl explain" href="/docs/user-guide/kubectl/kubectl_explain/"></a>
    <a class="item" data-title="kubectl expose" href="/docs/user-guide/kubectl/kubectl_expose/"></a>
    <a class="item" data-title="kubectl get" href="/docs/user-guide/kubectl/kubectl_get/"></a>
    <a class="item" data-title="kubectl label" href="/docs/user-guide/kubectl/kubectl_label/"></a>
    <a class="item" data-title="kubectl logs" href="/docs/user-guide/kubectl/kubectl_logs/"></a>
    <a class="item" data-title="kubectl patch" href="/docs/user-guide/kubectl/kubectl_patch/"></a>
    <a class="item" data-title="kubectl port-forward" href="/docs/user-guide/kubectl/kubectl_port-forward/"></a>
    <a class="item" data-title="kubectl proxy" href="/docs/user-guide/kubectl/kubectl_proxy/"></a>
    <a class="item" data-title="kubectl replace" href="/docs/user-guide/kubectl/kubectl_replace/"></a>
    <a class="item" data-title="kubectl rolling-update" href="/docs/user-guide/kubectl/kubectl_rolling-update/"></a>
    <a class="item" data-title="kubectl rollout" href="/docs/user-guide/kubectl/kubectl_rollout/"></a>
    <a class="item" data-title="kubectl rollout history" href="/docs/user-guide/kubectl/kubectl_rollout_history/"></a>
    <a class="item" data-title="kubectl rollout pause" href="/docs/user-guide/kubectl/kubectl_rollout_pause/"></a>
    <a class="item" data-title="kubectl rollout resume" href="/docs/user-guide/kubectl/kubectl_rollout_resume/"></a>
    <a class="item" data-title="kubectl rollout undo" href="/docs/user-guide/kubectl/kubectl_rollout_undo/"></a>
    <a class="item" data-title="kubectl run" href="/docs/user-guide/kubectl/kubectl_run/"></a>
    <a class="item" data-title="kubectl scale" href="/docs/user-guide/kubectl/kubectl_scale/"></a>
    <a class="item" data-title="kubectl uncordon" href="/docs/user-guide/kubectl/kubectl_uncordon/"></a>
    <a class="item" data-title="kubectl version" href="/docs/user-guide/kubectl/kubectl_version/"></a>
<div class="item" data-title="Superseded and Deprecated Commands">
  <div class="container">
    <a class="item" data-title="kubectl namespace" href="/docs/user-guide/kubectl/kubectl_namespace/"></a>
    <a class="item" data-title="kubectl stop" href="/docs/user-guide/kubectl/kubectl_stop/"></a>
  </div>
</div>
  </div>
</div>
  </div>
</div>
<div class="item" data-title="Kubernetes Components">
  <div class="container">
    <a class="item" data-title="kube-apiserver" href="/docs/admin/kube-apiserver/"></a>
    <a class="item" data-title="kube-controller-manager" href="/docs/admin/kube-controller-manager/"></a>
    <a class="item" data-title="kube-proxy" href="/docs/admin/kube-proxy/"></a>
    <a class="item" data-title="kube-scheduler" href="/docs/admin/kube-scheduler/"></a>
    <a class="item" data-title="kubelet" href="/docs/admin/kubelet/"></a>
  </div>
</div>
<div class="item" data-title="Glossary">
  <div class="container">
    <a class="item" data-title="Annotations" href="/docs/user-guide/annotations/"></a>
    <a class="item" data-title="Daemon Sets" href="/docs/admin/daemons/"></a>
    <a class="item" data-title="Deployments" href="/docs/user-guide/deployments/"></a>
    <a class="item" data-title="Horizontal Pod Autoscaling" href="/docs/user-guide/horizontal-pod-autoscaling/"></a>
    <a class="item" data-title="Images" href="/docs/user-guide/images/"></a>
    <a class="item" data-title="Ingress Resources" href="/docs/user-guide/ingress/"></a>
    <a class="item" data-title="Jobs" href="/docs/user-guide/jobs/"></a>
    <a class="item" data-title="Labels and Selectors" href="/docs/user-guide/labels/"></a>
    <a class="item" data-title="Names" href="/docs/user-guide/identifiers/"></a>
    <a class="item" data-title="Namespaces" href="/docs/user-guide/namespaces/"></a>
    <a class="item" data-title="Network Policies" href="/docs/user-guide/networkpolicies/"></a>
    <a class="item" data-title="Nodes" href="/docs/admin/node/"></a>
    <a class="item" data-title="Persistent Volumes" href="/docs/user-guide/persistent-volumes/"></a>
    <a class="item" data-title="Pet Sets" href="/docs/user-guide/petset/"></a>
    <a class="item" data-title="Pods" href="/docs/user-guide/pods/"></a>
    <a class="item" data-title="Replica Sets" href="/docs/user-guide/replicasets/"></a>
    <a class="item" data-title="Replication Controller" href="/docs/user-guide/replication-controller/"></a>
    <a class="item" data-title="Resource Quotas" href="/docs/admin/resource-quota/"></a>
    <a class="item" data-title="Secrets" href="/docs/user-guide/secrets/"></a>
    <a class="item" data-title="Security Context" href="/docs/user-guide/security-context/"></a>
    <a class="item" data-title="Services" href="/docs/user-guide/services/"></a>
    <a class="item" data-title="Service Accounts" href="/docs/user-guide/service-accounts/"></a>
    <a class="item" data-title="Volumes" href="/docs/user-guide/volumes/"></a>
  </div>
</div>
<div class="item" data-title="Kubernetes Design Docs">
  <div class="container">
    <a class="item" data-title="Kubernetes Architecture" href="https://github.com/kubernetes/kubernetes/blob/release-1.3/docs/design/architecture.md" target='_blank'></a>
    <a class="item" data-title="Kubernetes Design Overview" href="https://github.com/kubernetes/kubernetes/blob/release-1.3/docs/design/" target='_blank'></a>
    <a class="item" data-title="Kubernetes Identity and Access Management" href="https://github.com/kubernetes/kubernetes/blob/release-1.3/docs/design/access.md" target='_blank'></a>
    <a class="item" data-title="Kubernetes OpenVSwitch GRE/VxLAN networking" href="/docs/admin/ovs-networking/"></a>
    <a class="item" data-title="Security Contexts" href="https://github.com/kubernetes/kubernetes/blob/release-1.3/docs/design/security_context.md" target='_blank'></a>
    <a class="item" data-title="Security in Kubernetes" href="https://github.com/kubernetes/kubernetes/blob/release-1.3/docs/design/security.md" target='_blank'></a>
  </div>
</div>
        </div> <!-- /pi-accordion -->
		<button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
	</div> <!-- /docsToc -->
	<div id="docsContent">
        <p><a href="/editdocs#docs/user-guide/labels.md" id="editPageButton">Edit This Page</a></p>
    	<h1>Labels and Selectors</h1>
		<p><em>Labels</em> are key/value pairs that are attached to objects, such as pods.
Labels are intended to be used to specify identifying attributes of objects that are meaningful and relevant to users, but which do not directly imply semantics to the core system.
Labels can be used to organize and to select subsets of objects.  Labels can be attached to objects at creation time and subsequently added and modified at any time.
Each object can have a set of key/value labels defined.  Each Key must be unique for a given object.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="s2">"labels"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nt">"key1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"value1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"key2"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"value2"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>We’ll eventually index and reverse-index labels for efficient queries and watches, use them to sort and group in UIs and CLIs, etc. We don’t want to pollute labels with non-identifying, especially large and/or structured, data. Non-identifying information should be recorded using <a href="/docs/user-guide/annotations">annotations</a>.</p>

<ul id="markdown-toc">
  <li><a href="#motivation" id="markdown-toc-motivation">Motivation</a></li>
  <li><a href="#syntax-and-character-set" id="markdown-toc-syntax-and-character-set">Syntax and character set</a></li>
  <li><a href="#label-selectors" id="markdown-toc-label-selectors">Label selectors</a>    <ul>
      <li><a href="#equality-based-requirement" id="markdown-toc-equality-based-requirement"><em>Equality-based</em> requirement</a></li>
      <li><a href="#set-based-requirement" id="markdown-toc-set-based-requirement"><em>Set-based</em> requirement</a></li>
    </ul>
  </li>
  <li><a href="#api" id="markdown-toc-api">API</a>    <ul>
      <li><a href="#list-and-watch-filtering" id="markdown-toc-list-and-watch-filtering">LIST and WATCH filtering</a></li>
      <li><a href="#set-references-in-api-objects" id="markdown-toc-set-references-in-api-objects">Set references in API objects</a>        <ul>
          <li><a href="#service-and-replicationcontroller" id="markdown-toc-service-and-replicationcontroller">Service and ReplicationController</a></li>
          <li><a href="#resources-that-support-set-based-requirements" id="markdown-toc-resources-that-support-set-based-requirements">Resources that support set-based requirements</a></li>
          <li><a href="#selecting-sets-of-nodes" id="markdown-toc-selecting-sets-of-nodes">Selecting sets of nodes</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="motivation">Motivation</h2>

<p>Labels enable users to map their own organizational structures onto system objects in a loosely coupled fashion, without requiring clients to store these mappings.</p>

<p>Service deployments and batch processing pipelines are often multi-dimensional entities (e.g., multiple partitions or deployments, multiple release tracks, multiple tiers, multiple micro-services per tier). Management often requires cross-cutting operations, which breaks encapsulation of strictly hierarchical representations, especially rigid hierarchies determined by the infrastructure rather than by users.</p>

<p>Example labels:</p>

<ul>
  <li><code class="highlighter-rouge">"release" : "stable"</code>, <code class="highlighter-rouge">"release" : "canary"</code></li>
  <li><code class="highlighter-rouge">"environment" : "dev"</code>, <code class="highlighter-rouge">"environment" : "qa"</code>, <code class="highlighter-rouge">"environment" : "production"</code></li>
  <li><code class="highlighter-rouge">"tier" : "frontend"</code>, <code class="highlighter-rouge">"tier" : "backend"</code>, <code class="highlighter-rouge">"tier" : "cache"</code></li>
  <li><code class="highlighter-rouge">"partition" : "customerA"</code>, <code class="highlighter-rouge">"partition" : "customerB"</code></li>
  <li><code class="highlighter-rouge">"track" : "daily"</code>, <code class="highlighter-rouge">"track" : "weekly"</code></li>
</ul>

<p>These are just examples; you are free to develop your own conventions.</p>

<h2 id="syntax-and-character-set">Syntax and character set</h2>

<p><em>Labels</em> are key value pairs. Valid label keys have two segments: an optional prefix and name, separated by a slash (<code class="highlighter-rouge">/</code>).  The name segment is required and must be 63 characters or less, beginning and ending with an alphanumeric character (<code class="highlighter-rouge">[a-z0-9A-Z]</code>) with dashes (<code class="highlighter-rouge">-</code>), underscores (<code class="highlighter-rouge">_</code>), dots (<code class="highlighter-rouge">.</code>), and alphanumerics between.  The prefix is optional.  If specified, the prefix must be a DNS subdomain: a series of DNS labels separated by dots (<code class="highlighter-rouge">.</code>), not longer than 253 characters in total, followed by a slash (<code class="highlighter-rouge">/</code>).
If the prefix is omitted, the label key is presumed to be private to the user. Automated system components (e.g. <code class="highlighter-rouge">kube-scheduler</code>, <code class="highlighter-rouge">kube-controller-manager</code>, <code class="highlighter-rouge">kube-apiserver</code>, <code class="highlighter-rouge">kubectl</code>, or other third-party automation) which add labels to end-user objects must specify a prefix.  The <code class="highlighter-rouge">kubernetes.io/</code> prefix is reserved for Kubernetes core components.</p>

<p>Valid label values must be 63 characters or less and must be empty or begin and end with an alphanumeric character (<code class="highlighter-rouge">[a-z0-9A-Z]</code>) with dashes (<code class="highlighter-rouge">-</code>), underscores (<code class="highlighter-rouge">_</code>), dots (<code class="highlighter-rouge">.</code>), and alphanumerics between.</p>

<h2 id="label-selectors">Label selectors</h2>

<p>Unlike <a href="/docs/user-guide/identifiers">names and UIDs</a>, labels do not provide uniqueness. In general, we expect many objects to carry the same label(s).</p>

<p>Via a <em>label selector</em>, the client/user can identify a set of objects. The label selector is the core grouping primitive in Kubernetes.</p>

<p>The API currently supports two types of selectors: <em>equality-based</em> and <em>set-based</em>.
A label selector can be made of multiple <em>requirements</em> which are comma-separated. In the case of multiple requirements, all must be satisfied so the comma separator acts as an <em>AND</em> logical operator.</p>

<p>An empty label selector (that is, one with zero requirements) selects every object in the collection.</p>

<p>A null label selector (which is only possible for optional selector fields) selects no objects.</p>

<p><strong>Note</strong>: the label selectors of two controllers must not overlap within a namespace, otherwise they will fight with each other.</p>

<h3 id="equality-based-requirement"><em>Equality-based</em> requirement</h3>

<p><em>Equality-</em> or <em>inequality-based</em> requirements allow filtering by label keys and values. Matching objects must satisfy all of the specified label constraints, though they may have additional labels as well.
Three kinds of operators are admitted <code class="highlighter-rouge">=</code>,<code class="highlighter-rouge">==</code>,<code class="highlighter-rouge">!=</code>. The first two represent <em>equality</em> (and are simply synonyms), while the latter represents <em>inequality</em>. For example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>environment = production
tier != frontend
</code></pre>
</div>

<p>The former selects all resources with key equal to <code class="highlighter-rouge">environment</code> and value equal to <code class="highlighter-rouge">production</code>.
The latter selects all resources with key equal to <code class="highlighter-rouge">tier</code> and value distinct from <code class="highlighter-rouge">frontend</code>, and all resources with no labels with the <code class="highlighter-rouge">tier</code> key.
One could filter for resources in <code class="highlighter-rouge">production</code> excluding <code class="highlighter-rouge">frontend</code> using the comma operator: <code class="highlighter-rouge">environment=production,tier!=frontend</code></p>

<h3 id="set-based-requirement"><em>Set-based</em> requirement</h3>

<p><em>Set-based</em> label requirements allow filtering keys according to a set of values. Three kinds of operators are supported: <code class="highlighter-rouge">in</code>,<code class="highlighter-rouge">notin</code> and exists (only the key identifier). For example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>environment in (production, qa)
tier notin (frontend, backend)
partition
!partition
</code></pre>
</div>

<p>The first example selects all resources with key equal to <code class="highlighter-rouge">environment</code> and value equal to <code class="highlighter-rouge">production</code> or <code class="highlighter-rouge">qa</code>.
The second example selects all resources with key equal to <code class="highlighter-rouge">tier</code> and values other than <code class="highlighter-rouge">frontend</code> and <code class="highlighter-rouge">backend</code>, and all resources with no labels with the <code class="highlighter-rouge">tier</code> key.
The third example selects all resources including a label with key <code class="highlighter-rouge">partition</code>; no values are checked.
The fourth example selects all resources without a label with key <code class="highlighter-rouge">partition</code>; no values are checked.
Similarly the comma separator acts as an <em>AND</em> operator. So filtering resources with a <code class="highlighter-rouge">partition</code> key (no matter the value) and with <code class="highlighter-rouge">environment</code> different than  <code class="highlighter-rouge">qa</code> can be achieved using <code class="highlighter-rouge">partition,environment notin (qa)</code>.
The <em>set-based</em> label selector is a general form of equality since <code class="highlighter-rouge">environment=production</code> is equivalent to <code class="highlighter-rouge">environment in (production)</code>; similarly for <code class="highlighter-rouge">!=</code> and <code class="highlighter-rouge">notin</code>.</p>

<p><em>Set-based</em> requirements can be mixed with <em>equality-based</em> requirements. For example: <code class="highlighter-rouge">partition in (customerA, customerB),environment!=qa</code>.</p>

<h2 id="api">API</h2>

<h3 id="list-and-watch-filtering">LIST and WATCH filtering</h3>

<p>LIST and WATCH operations may specify label selectors to filter the sets of objects returned using a query parameter. Both requirements are permitted:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>* _equality-based_ requirements: `?labelSelector=environment%3Dproduction,tier%3Dfrontend`
* _set-based_ requirements: `?labelSelector=environment+in+%28production%2Cqa%29%2Ctier+in+%28frontend%29`
</code></pre>
</div>

<p>Both label selector styles can be used to list or watch resources via a REST client. For example targeting <code class="highlighter-rouge">apiserver</code> with <code class="highlighter-rouge">kubectl</code> and using <em>equality-based</em> one may write:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>kubectl get pods -l <span class="nv">environment</span><span class="o">=</span>production,tier<span class="o">=</span>frontend
</code></pre>
</div>

<p>or using <em>set-based</em> requirements:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>kubectl get pods -l <span class="s1">'environment in (production),tier in (frontend)'</span>
</code></pre>
</div>

<p>As already mentioned <em>set-based</em> requirements are more expressive.  For instance, they can implement the <em>OR</em> operator on values:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>kubectl get pods -l <span class="s1">'environment in (production, qa)'</span>
</code></pre>
</div>

<p>or restricting negative matching via <em>exists</em> operator:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>kubectl get pods -l <span class="s1">'environment,environment notin (frontend)'</span>
</code></pre>
</div>

<h3 id="set-references-in-api-objects">Set references in API objects</h3>

<p>Some Kubernetes objects, such as <a href="/docs/user-guide/services"><code class="highlighter-rouge">service</code>s</a> and <a href="/docs/user-guide/replication-controller"><code class="highlighter-rouge">replicationcontroller</code>s</a>, also use label selectors to specify sets of other resources, such as <a href="/docs/user-guide/pods">pods</a>.</p>

<h4 id="service-and-replicationcontroller">Service and ReplicationController</h4>

<p>The set of pods that a <code class="highlighter-rouge">service</code> targets is defined with a label selector. Similarly, the population of pods that a <code class="highlighter-rouge">replicationcontroller</code> should manage is also defined with a label selector.</p>

<p>Labels selectors for both objects are defined in <code class="highlighter-rouge">json</code> or <code class="highlighter-rouge">yaml</code> files using maps, and only <em>equality-based</em> requirement selectors are supported:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="s2">"selector"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"component"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"redis"</span><span class="p">,</span><span class="w">
</span><span class="err">}</span><span class="w">
</span></code></pre>
</div>
<p>or</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">selector</span><span class="pi">:</span>
    <span class="s">component</span><span class="pi">:</span> <span class="s">redis</span>
</code></pre>
</div>

<p>this selector (respectively in <code class="highlighter-rouge">json</code> or <code class="highlighter-rouge">yaml</code> format) is equivalent to <code class="highlighter-rouge">component=redis</code> or <code class="highlighter-rouge">component in (redis)</code>.</p>

<h4 id="resources-that-support-set-based-requirements">Resources that support set-based requirements</h4>

<p>Newer resources, such as <a href="/docs/user-guide/jobs"><code class="highlighter-rouge">Job</code></a>, <a href="/docs/user-guide/deployments/"><code class="highlighter-rouge">Deployment</code></a>, <a href="/docs/user-guide/replicasets/"><code class="highlighter-rouge">Replica Set</code></a>, and <a href="/docs/admin/daemons/"><code class="highlighter-rouge">Daemon Set</code></a>, support <em>set-based</em> requirements as well.</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">selector</span><span class="pi">:</span>
  <span class="s">matchLabels</span><span class="pi">:</span>
    <span class="s">component</span><span class="pi">:</span> <span class="s">redis</span>
  <span class="s">matchExpressions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="pi">{</span><span class="nv">key</span><span class="pi">:</span> <span class="nv">tier</span><span class="pi">,</span> <span class="nv">operator</span><span class="pi">:</span> <span class="nv">In</span><span class="pi">,</span> <span class="nv">values</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">cache</span><span class="pi">]}</span>
    <span class="pi">-</span> <span class="pi">{</span><span class="nv">key</span><span class="pi">:</span> <span class="nv">environment</span><span class="pi">,</span> <span class="nv">operator</span><span class="pi">:</span> <span class="nv">NotIn</span><span class="pi">,</span> <span class="nv">values</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">dev</span><span class="pi">]}</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">matchLabels</code> is a map of <code class="highlighter-rouge"><span class="p">{</span><span class="err">key,value</span><span class="p">}</span></code> pairs. A single <code class="highlighter-rouge"><span class="p">{</span><span class="err">key,value</span><span class="p">}</span></code> in the <code class="highlighter-rouge">matchLabels</code> map is equivalent to an element of <code class="highlighter-rouge">matchExpressions</code>, whose <code class="highlighter-rouge">key</code> field is “key”, the <code class="highlighter-rouge">operator</code> is “In”, and the <code class="highlighter-rouge">values</code> array contains only “value”. <code class="highlighter-rouge">matchExpressions</code> is a list of pod selector requirements. Valid operators include In, NotIn, Exists, and DoesNotExist. The values set must be non-empty in the case of In and NotIn. All of the requirements, from both <code class="highlighter-rouge">matchLabels</code> and <code class="highlighter-rouge">matchExpressions</code> are ANDed together – they must all be satisfied in order to match.</p>

<h4 id="selecting-sets-of-nodes">Selecting sets of nodes</h4>

<p>One use case for selecting over labels is to constrain the set of nodes onto which a pod can schedule.
See the documentation on <a href="/docs/user-guide/node-selection">node selection</a> for more information.</p>

        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/user-guide/labels.md?pixel" alt="Analytics" /></a>
        <div id="pd_rating_holder_8345992"></div>
		<script type="text/javascript">
	        PDRTJS_settings_8345992 = {
		        "id" : "8345992",
		        "unique_id" : "/docs/user-guide/labels/",
		        "title" : "Labels and Selectors",
		        "permalink" : "http://kubernetes.github.io/docs/user-guide/labels/"
	        };
	        (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
	</div>
</section>

<footer>
	<main class="light-text">
		<nav>
			<a href="/docs/hellonode/">Get Started</a>
			<a href="/docs/">Documentation</a>
			<a href="http://blog.kubernetes.io/">Blog</a>
			<a href="/community/">Community</a>
		</nav>
		<div class="social">
			<div>
				<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
				<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
				<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
			</div>
			<div>
				<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
				<a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
				<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
			</div>
			<div>
				<span>I wish this page</span>
				<input type="text" id="wishField" name="wishField" placeholder="enter your wish">
			</div>
		</div>
		<div id="miceType" class="center">&copy; 2016 Kubernetes</div>
	</main>
</footer>


<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
	.cse .gsc-control-cse, .gsc-control-cse, {
		padding: 0;
	}
	.gsc-control-cse table, .gsc-control-cse-en table {
		margin:0px !important;
	}

	.gsc-above-wrapper-area {
		border-bottom: 0;
	}
</style>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36037335-10', 'auto');
  ga('send', 'pageview');
</script>
<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
<!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->
</body>
</html>
