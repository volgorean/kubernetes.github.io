

<!Doctype html>
<html id="docs" class="Guides">


<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="canonical" href="http://kubernetes.io/docs/user-guide/accessing-the-cluster/" />
	<link rel="shortcut icon" type="image/png" href="/images/favicon.png">
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href='https://fonts.googleapis.com/css?family=Roboto+Mono' type='text/css'>
	<link rel="stylesheet" href="/css/styles.css"/>
        <link rel="stylesheet" href="/css/jquery-ui.min.css">
        <link rel="stylesheet" href="/css/sweetalert.css">
	<script src="/js/jquery-2.2.0.min.js"></script>
        <script src="/js/jquery-ui.min.js"></script>
	<script src="/js/script.js"></script>
        <script src="/js/sweetalert.min.js"></script>
	<title>Kubernetes - Accessing Clusters</title>
</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>
<header>
	<a href="/" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="/docs/" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a>
		<a href="/docs/hellonode/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
		<button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="/docs/hellonode/">Get Started</a></h3>
				<p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
			</div>
			<div class="nav-box">
				<h3><a href="/docs/">Documentation</a></h3>
				<p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
			</div>
			<div class="nav-box">
				<h3><a href="/community/">Community</a></h3>
				<p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
			</div>
			<div class="nav-box">
				<h3><a href="http://blog.kubernetes.io">Blog</a></h3>
				<p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
			</div>
		</main>
		<main data-auto-burger="primary">
			<div class="left">
				<h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
				<a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
			</div>

			<div class="right">
				<h5 class="github-invite">Explore the community</h5>
				<div class="social">
					<a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
					<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
					<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
					<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
					<a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
					<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
				</div>
			</div>
			<div class="clear" style="clear: both"></div>
		</main>
	</nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
	<h1>Guides</h1>
	<h5>How to get started, and achieve tasks, using Kubernetes</h5>
	<div id="vendorStrip" class="light-text">
		<ul>
			<li><a href="/docs/" class="YAH">GUIDES</a></li>
			<li><a href="/docs/reference" >REFERENCE</a></li>
			<li><a href="/docs/samples" >SAMPLES</a></li>
			<li><a href="/docs/troubleshooting/" >SUPPORT</a></li>
		</ul>
		<div id="searchBox">
			<input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
		</div>
	</div>
</section>

<section id="encyclopedia">
	<div id="docsToc">
        <div class="pi-accordion">
        
    <a class="item" data-title="Guides" href="/docs/"></a>
<div class="item" data-title="Getting Started">
  <div class="container">
    <a class="item" data-title="What is Kubernetes?" href="/docs/whatisk8s/"></a>
    <a class="item" data-title="Downloading or Building Kubernetes" href="/docs/getting-started-guides/binary_release/"></a>
    <a class="item" data-title="Hello World Walkthrough" href="/docs/hellonode/"></a>
    <a class="item" data-title="Online Training Course" href="https://www.udacity.com/course/scalable-microservices-with-kubernetes--ud615" target='_blank'></a>
  </div>
</div>
<div class="item" data-title="Accessing the Cluster">
  <div class="container">
    <a class="item" data-title="Installing and Setting up kubectl" href="/docs/user-guide/prereqs/"></a>
    <a class="item" data-title="Accessing Clusters" href="/docs/user-guide/accessing-the-cluster/"></a>
    <a class="item" data-title="Sharing Cluster Access with kubeconfig" href="/docs/user-guide/sharing-clusters/"></a>
    <a class="item" data-title="Authenticating Across Clusters with kubeconfig" href="/docs/user-guide/kubeconfig-file/"></a>
  </div>
</div>
    <a class="item" data-title="User Guide" href="/docs/user-guide/"></a>
    <a class="item" data-title="Web UI (Dashboard)" href="/docs/user-guide/ui/"></a>
<div class="item" data-title="Workload Deployment and Management">
  <div class="container">
    <a class="item" data-title="Launching, Exposing, and Killing Applications" href="/docs/user-guide/quick-start/"></a>
    <a class="item" data-title="Deploying Applications" href="/docs/user-guide/deploying-applications/"></a>
    <a class="item" data-title="Managing Resources" href="/docs/user-guide/managing-deployments/"></a>
    <a class="item" data-title="Replication Controller Operations" href="/docs/user-guide/replication-controller/operations/"></a>
    <a class="item" data-title="Resizing a Replication Controller" href="/docs/user-guide/resizing-a-replication-controller/"></a>
    <a class="item" data-title="Rolling Updates" href="/docs/user-guide/rolling-updates/"></a>
    <a class="item" data-title="Rolling Update Demo" href="/docs/user-guide/update-demo/"></a>
    <a class="item" data-title="Secrets Walkthrough" href="/docs/user-guide/secrets/walkthrough/"></a>
    <a class="item" data-title="Using ConfigMap" href="/docs/user-guide/configmap/"></a>
    <a class="item" data-title="Horizontal Pod Autoscaling" href="/docs/user-guide/horizontal-pod-autoscaling/walkthrough/"></a>
    <a class="item" data-title="Best Practices for Configuration" href="/docs/user-guide/config-best-practices/"></a>
    <a class="item" data-title="Using kubectl to Manage Resources" href="/docs/user-guide/working-with-resources/"></a>
    <a class="item" data-title="Garbage collection" href="/docs/user-guide/garbage-collector/"></a>
  </div>
</div>
<div class="item" data-title="Batch Jobs">
  <div class="container">
    <a class="item" data-title="Jobs" href="/docs/user-guide/jobs/"></a>
    <a class="item" data-title="Parallel Processing using Expansions" href="/docs/user-guide/jobs/expansions/"></a>
    <a class="item" data-title="Coarse Parallel Processing using a Work Queue" href="/docs/user-guide/jobs/work-queue-1/"></a>
    <a class="item" data-title="Fine Parallel Processing using a Work Queue" href="/docs/user-guide/jobs/work-queue-2/"></a>
  </div>
</div>
<div class="item" data-title="Service Discovery and Load Balancing">
  <div class="container">
    <a class="item" data-title="Connecting Applications with Services" href="/docs/user-guide/connecting-applications/"></a>
    <a class="item" data-title="Service Operations" href="/docs/user-guide/services/operations/"></a>
    <a class="item" data-title="Creating an External Load Balancer" href="/docs/user-guide/load-balancer/"></a>
    <a class="item" data-title="Configuring Your Cloud Provider's Firewalls" href="/docs/user-guide/services-firewalls/"></a>
    <a class="item" data-title="Cross-cluster Service Discovery using Federated Services" href="/docs/user-guide/federation/federated-services/"></a>
  </div>
</div>
<div class="item" data-title="Containers and Pods">
  <div class="container">
    <a class="item" data-title="Running Your First Containers" href="/docs/user-guide/simple-nginx/"></a>
    <a class="item" data-title="Creating Single-Container Pods" href="/docs/user-guide/pods/single-container/"></a>
    <a class="item" data-title="Creating Multi-Container Pods" href="/docs/user-guide/pods/multi-container/"></a>
    <a class="item" data-title="Configuring Containers" href="/docs/user-guide/configuring-containers/"></a>
    <a class="item" data-title="Working with Containers in Production" href="/docs/user-guide/production-pods/"></a>
    <a class="item" data-title="Commands and Capabilities" href="/docs/user-guide/containers/"></a>
    <a class="item" data-title="Using Environment Variables" href="/docs/user-guide/environment-guide/"></a>
    <a class="item" data-title="Managing Compute Resources" href="/docs/user-guide/compute-resources/"></a>
    <a class="item" data-title="The Lifecycle of a Pod" href="/docs/user-guide/pod-states/"></a>
    <a class="item" data-title="Checking Pod Health" href="/docs/user-guide/liveness/"></a>
    <a class="item" data-title="Container Lifecycle Hooks" href="/docs/user-guide/container-environment/"></a>
    <a class="item" data-title="Assigning Pods to Nodes" href="/docs/user-guide/node-selection/"></a>
    <a class="item" data-title="Using the Downward API to Convey Pod Properties" href="/docs/user-guide/downward-api/"></a>
    <a class="item" data-title="Downward API Volumes" href="/docs/user-guide/downward-api/volume"></a>
    <a class="item" data-title="Persistent Volumes Walkthrough" href="/docs/user-guide/persistent-volumes/walkthrough/"></a>
    <a class="item" data-title="Bootstrapping Pet Sets" href="/docs/user-guide/petset/bootstrapping/"></a>
  </div>
</div>
<div class="item" data-title="Monitoring, Logging, and Debugging Containers">
  <div class="container">
    <a class="item" data-title="Resource Usage Monitoring" href="/docs/user-guide/monitoring/"></a>
    <a class="item" data-title="Logging" href="/docs/getting-started-guides/logging/"></a>
    <a class="item" data-title="Logging with Elasticsearch and Kibana" href="/docs/getting-started-guides/logging-elasticsearch/"></a>
    <a class="item" data-title="Running Commands in a Container with kubectl exec" href="/docs/user-guide/getting-into-containers/"></a>
    <a class="item" data-title="Connect with Proxies" href="/docs/user-guide/connecting-to-applications-proxy/"></a>
    <a class="item" data-title="Connect with Port Forwarding" href="/docs/user-guide/connecting-to-applications-port-forward/"></a>
    <a class="item" data-title="Using Explorer to Examine the Runtime Environment" href="https://github.com/kubernetes/kubernetes/tree/release-1.3/examples/explorer" target='_blank'></a>
  </div>
</div>
<div class="item" data-title="Creating a Cluster">
  <div class="container">
    <a class="item" data-title="Picking the Right Solution" href="/docs/getting-started-guides/"></a>
<div class="item" data-title="Running Kubernetes on Your Local Machine">
  <div class="container">
    <a class="item" data-title="Running Kubernetes Locally via Minikube" href="/docs/getting-started-guides/minikube/"></a>
    <a class="item" data-title="Deprecated Alternatives" href="/docs/getting-started-guides/alternatives/"></a>
  </div>
</div>
<div class="item" data-title="Running Kubernetes on Turn-key Cloud Solutions">
  <div class="container">
    <a class="item" data-title="Running Kubernetes on Google Container Engine" href="https://cloud.google.com/container-engine/docs/before-you-begin/" target='_blank'></a>
    <a class="item" data-title="Running Kubernetes on Google Compute Engine" href="/docs/getting-started-guides/gce/"></a>
    <a class="item" data-title="Running Kubernetes on AWS EC2" href="/docs/getting-started-guides/aws/"></a>
    <a class="item" data-title="Running Kubernetes on Azure (Weave-based)" href="/docs/getting-started-guides/coreos/azure/"></a>
    <a class="item" data-title="Running Kubernetes on Azure (Flannel-based)" href="/docs/getting-started-guides/azure/"></a>
    <a class="item" data-title="Running Kubernetes on CenturyLink Cloud" href="/docs/getting-started-guides/clc/"></a>
  </div>
</div>
<div class="item" data-title="Running Kubernetes on Custom Solutions">
  <div class="container">
    <a class="item" data-title="Creating a Custom Cluster from Scratch" href="/docs/getting-started-guides/scratch/"></a>
<div class="item" data-title="Custom Cloud Solutions">
  <div class="container">
    <a class="item" data-title="CoreOS on AWS or GCE" href="/docs/getting-started-guides/coreos/"></a>
    <a class="item" data-title="Ubuntu on AWS or Joyent" href="/docs/getting-started-guides/juju/"></a>
    <a class="item" data-title="CoreOS on Rackspace" href="/docs/getting-started-guides/rackspace/"></a>
  </div>
</div>
<div class="item" data-title="On-Premise VMs">
  <div class="container">
    <a class="item" data-title="CoreOS on Vagrant" href="/docs/getting-started-guides/coreos/"></a>
    <a class="item" data-title="Cloudstack" href="/docs/getting-started-guides/cloudstack/"></a>
    <a class="item" data-title="VMware vSphere" href="/docs/getting-started-guides/vsphere/"></a>
    <a class="item" data-title="VMware Photon Controller" href="/docs/getting-started-guides/photon-controller/"></a>
    <a class="item" data-title="Juju" href="/docs/getting-started-guides/juju/"></a>
    <a class="item" data-title="DCOS" href="/docs/getting-started-guides/dcos/"></a>
    <a class="item" data-title="CoreOS on libvirt" href="/docs/getting-started-guides/libvirt-coreos/"></a>
    <a class="item" data-title="oVirt" href="/docs/getting-started-guides/ovirt/"></a>
    <a class="item" data-title="OpenStack Heat" href="/docs/getting-started-guides/openstack-heat/"></a>
    <a class="item" data-title="CoreOS on Multinode Cluster" href="/docs/getting-started-guides/coreos/coreos_multinode_cluster/"></a>
    <a class="item" data-title="Fedora With Calico Networking" href="/docs/getting-started-guides/fedora/fedora-calico/"></a>
<div class="item" data-title="rkt">
  <div class="container">
    <a class="item" data-title="Running Kubernetes with rkt" href="/docs/getting-started-guides/rkt/"></a>
    <a class="item" data-title="Known Issues when Using rkt" href="/docs/getting-started-guides/rkt/notes/"></a>
  </div>
</div>
    <a class="item" data-title="Kubernetes on Mesos" href="/docs/getting-started-guides/mesos/"></a>
    <a class="item" data-title="Kubernetes on Mesos on Docker" href="/docs/getting-started-guides/mesos-docker/"></a>
  </div>
</div>
<div class="item" data-title="Bare Metal">
  <div class="container">
    <a class="item" data-title="Offline" href="/docs/getting-started-guides/coreos/bare_metal_offline/"></a>
    <a class="item" data-title="Fedora via Ansible" href="/docs/getting-started-guides/fedora/fedora_ansible_config/"></a>
    <a class="item" data-title="Fedora (Single Node)" href="/docs/getting-started-guides/fedora/fedora_manual_config/"></a>
    <a class="item" data-title="Fedora (Multi Node)" href="/docs/getting-started-guides/fedora/flannel_multi_node_cluster/"></a>
    <a class="item" data-title="CentOS" href="/docs/getting-started-guides/centos/centos_manual_config/"></a>
    <a class="item" data-title="CoreOS" href="/docs/getting-started-guides/coreos"></a>
    <a class="item" data-title="CoreOS with Calico" href="/docs/getting-started-guides/coreos/bare_metal_calico/"></a>
    <a class="item" data-title="Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    <a class="item" data-title="Ubuntu Nodes with Calico" href="/docs/getting-started-guides/ubuntu-calico/"></a>
  </div>
</div>
  </div>
</div>
    <a class="item" data-title="Portable Multi-Node Cluster" href="/docs/getting-started-guides/docker-multinode/"></a>
    <a class="item" data-title="Building Large Clusters" href="/docs/admin/cluster-large/"></a>
    <a class="item" data-title="Running in Multiple Zones" href="/docs/admin/multiple-zones/"></a>
    <a class="item" data-title="Building High-Availability Clusters" href="/docs/admin/high-availability/"></a>
  </div>
</div>
<div class="item" data-title="Administering Clusters">
  <div class="container">
    <a class="item" data-title="Admin Guide" href="/docs/admin/"></a>
    <a class="item" data-title="Cluster Management Guide" href="/docs/admin/cluster-management/"></a>
    <a class="item" data-title="Sharing a Cluster with Namespaces" href="/docs/admin/namespaces/"></a>
    <a class="item" data-title="Namespaces Walkthrough" href="/docs/admin/namespaces/walkthrough/"></a>
    <a class="item" data-title="Setting Pod CPU and Memory Limits" href="/docs/admin/limitrange/"></a>
    <a class="item" data-title="Understanding Resource Quotas" href="/docs/admin/resourcequota/"></a>
    <a class="item" data-title="Applying Resource Quotas and Limits" href="/docs/admin/resourcequota/walkthrough/"></a>
    <a class="item" data-title="Kubernetes Components" href="/docs/admin/cluster-components/"></a>
    <a class="item" data-title="Configuring Kubernetes Use of etcd" href="/docs/admin/etcd/"></a>
    <a class="item" data-title="Federating Clusters" href="/docs/admin/federation/"></a>
    <a class="item" data-title="Using Multiple Clusters" href="/docs/admin/multi-cluster/"></a>
    <a class="item" data-title="Changing Cluster Size" href="https://github.com/kubernetes/kubernetes/wiki/User-FAQ#how-do-i-change-the-size-of-my-cluster/" target='_blank'></a>
    <a class="item" data-title="Configuring Multiple Schedulers" href="/docs/admin/multiple-schedulers/"></a>
    <a class="item" data-title="Networking in Kubernetes" href="/docs/admin/networking/"></a>
    <a class="item" data-title="Using DNS Pods and Services" href="/docs/admin/dns/"></a>
    <a class="item" data-title="Setting Up and Configuring DNS" href="https://github.com/kubernetes/kubernetes/tree/release-1.3/examples/cluster-dns" target='_blank'></a>
    <a class="item" data-title="Master <-> Node Communication" href="/docs/admin/master-node-communication/"></a>
    <a class="item" data-title="Network Plugins" href="/docs/admin/network-plugins/"></a>
    <a class="item" data-title="Static Pods" href="/docs/admin/static-pods/"></a>
    <a class="item" data-title="Configuring kubelet Garbage Collection" href="/docs/admin/garbage-collection/"></a>
    <a class="item" data-title="Configuring Out Of Resource Handling" href="/docs/admin/out-of-resource/"></a>
    <a class="item" data-title="Configuring Kubernetes with Salt" href="/docs/admin/salt/"></a>
    <a class="item" data-title="Monitoring Node Health" href="/docs/admin/node-problem/"></a>
  </div>
</div>
        </div> <!-- /pi-accordion -->
		<button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
	</div> <!-- /docsToc -->
	<div id="docsContent">
        <p><a href="/editdocs#docs/user-guide/accessing-the-cluster.md" id="editPageButton">Edit This Page</a></p>
    	<h1>Accessing Clusters</h1>
		<ul id="markdown-toc">
  <li><a href="#accessing-the-cluster-api" id="markdown-toc-accessing-the-cluster-api">Accessing the cluster API</a>    <ul>
      <li><a href="#accessing-for-the-first-time-with-kubectl" id="markdown-toc-accessing-for-the-first-time-with-kubectl">Accessing for the first time with kubectl</a></li>
      <li><a href="#directly-accessing-the-rest-api" id="markdown-toc-directly-accessing-the-rest-api">Directly accessing the REST API</a>        <ul>
          <li><a href="#using-kubectl-proxy" id="markdown-toc-using-kubectl-proxy">Using kubectl proxy</a></li>
          <li><a href="#without-kubectl-proxy" id="markdown-toc-without-kubectl-proxy">Without kubectl proxy</a></li>
        </ul>
      </li>
      <li><a href="#programmatic-access-to-the-api" id="markdown-toc-programmatic-access-to-the-api">Programmatic access to the API</a></li>
      <li><a href="#accessing-the-api-from-a-pod" id="markdown-toc-accessing-the-api-from-a-pod">Accessing the API from a Pod</a></li>
    </ul>
  </li>
  <li><a href="#accessing-services-running-on-the-cluster" id="markdown-toc-accessing-services-running-on-the-cluster">Accessing services running on the cluster</a>    <ul>
      <li><a href="#ways-to-connect" id="markdown-toc-ways-to-connect">Ways to connect</a></li>
      <li><a href="#discovering-builtin-services" id="markdown-toc-discovering-builtin-services">Discovering builtin services</a>        <ul>
          <li><a href="#manually-constructing-apiserver-proxy-urls" id="markdown-toc-manually-constructing-apiserver-proxy-urls">Manually constructing apiserver proxy URLs</a>            <ul>
              <li><a href="#examples" id="markdown-toc-examples">Examples</a></li>
            </ul>
          </li>
          <li><a href="#using-web-browsers-to-access-services-running-on-the-cluster" id="markdown-toc-using-web-browsers-to-access-services-running-on-the-cluster">Using web browsers to access services running on the cluster</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#requesting-redirects" id="markdown-toc-requesting-redirects">Requesting redirects</a></li>
  <li><a href="#so-many-proxies" id="markdown-toc-so-many-proxies">So Many Proxies</a></li>
</ul>

<h2 id="accessing-the-cluster-api">Accessing the cluster API</h2>

<h3 id="accessing-for-the-first-time-with-kubectl">Accessing for the first time with kubectl</h3>

<p>When accessing the Kubernetes API for the first time, we suggest using the
Kubernetes CLI, <code class="highlighter-rouge">kubectl</code>.</p>

<p>To access a cluster, you need to know the location of the cluster and have credentials
to access it.  Typically, this is automatically set-up when you work through
though a <a href="/docs/getting-started-guides/">Getting started guide</a>,
or someone else setup the cluster and provided you with credentials and a location.</p>

<p>Check the location and credentials that kubectl knows about with this command:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>kubectl config view
</code></pre>
</div>

<p>Many of the <a href="https://github.com/kubernetes/kubernetes/tree/master/examples/">examples</a> provide an introduction to using
kubectl and complete documentation is found in the <a href="/docs/user-guide/kubectl/kubectl">kubectl manual</a>.</p>

<h3 id="directly-accessing-the-rest-api">Directly accessing the REST API</h3>

<p>Kubectl handles locating and authenticating to the apiserver.
If you want to directly access the REST API with an http client like
curl or wget, or a browser, there are several ways to locate and authenticate:</p>

<ul>
  <li>Run kubectl in proxy mode.
    <ul>
      <li>Recommended approach.</li>
      <li>Uses stored apiserver location.</li>
      <li>Verifies identity of apiserver using self-signed cert.  No MITM possible.</li>
      <li>Authenticates to apiserver.</li>
      <li>In future, may do intelligent client-side load-balancing and failover.</li>
    </ul>
  </li>
  <li>Provide the location and credentials directly to the http client.
    <ul>
      <li>Alternate approach.</li>
      <li>Works with some types of client code that are confused by using a proxy.</li>
      <li>Need to import a root cert into your browser to protect against MITM.</li>
    </ul>
  </li>
</ul>

<h4 id="using-kubectl-proxy">Using kubectl proxy</h4>

<p>The following command runs kubectl in a mode where it acts as a reverse proxy.  It handles
locating the apiserver and authenticating.
Run it like this:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>kubectl proxy --port<span class="o">=</span>8080 &amp;
</code></pre>
</div>

<p>See <a href="/docs/user-guide/kubectl/kubectl_proxy">kubectl proxy</a> for more details.</p>

<p>Then you can explore the API with curl, wget, or a browser, like so:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>curl http://localhost:8080/api/
<span class="o">{</span>
  <span class="s2">"versions"</span>: <span class="o">[</span>
    <span class="s2">"v1"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre>
</div>

<h4 id="without-kubectl-proxy">Without kubectl proxy</h4>

<p>It is also possible to avoid using kubectl proxy by passing an authentication token
directly to the apiserver, like this:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nv">APISERVER</span><span class="o">=</span><span class="k">$(</span>kubectl config view | grep server | cut -f 2- -d <span class="s2">":"</span> | tr -d <span class="s2">" "</span><span class="k">)</span>
<span class="gp">$ </span><span class="nv">TOKEN</span><span class="o">=</span><span class="k">$(</span>kubectl config view | grep token | cut -f 2 -d <span class="s2">":"</span> | tr -d <span class="s2">" "</span><span class="k">)</span>
<span class="gp">$ </span>curl <span class="nv">$APISERVER</span>/api --header <span class="s2">"Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">"</span> --insecure
<span class="o">{</span>
  <span class="s2">"versions"</span>: <span class="o">[</span>
    <span class="s2">"v1"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre>
</div>

<p>The above example uses the <code class="highlighter-rouge">--insecure</code> flag.  This leaves it subject to MITM
attacks.  When kubectl accesses the cluster it uses a stored root certificate
and client certificates to access the server.  (These are installed in the
<code class="highlighter-rouge">~/.kube</code> directory).  Since cluster certificates are typically self-signed, it
may take special configuration to get your http client to use root
certificate.</p>

<p>On some clusters, the apiserver does not require authentication; it may serve
on localhost, or be protected by a firewall.  There is not a standard
for this.  <a href="/docs/admin/accessing-the-api">Configuring Access to the API</a>
describes how a cluster admin can configure this.  Such approaches may conflict
with future high-availability support.</p>

<h3 id="programmatic-access-to-the-api">Programmatic access to the API</h3>

<p>There are <a href="https://github.com/kubernetes/kubernetes/tree/master/docs/devel/client-libraries.md">client libraries</a> for accessing the API
from several languages.  The Kubernetes project-supported
<a href="http://releases.k8s.io/master/pkg/client/">Go</a>
client library can use the same <a href="/docs/user-guide/kubeconfig-file">kubeconfig file</a>
as the kubectl CLI does to locate and authenticate to the apiserver.</p>

<p>See documentation for other libraries for how they authenticate.</p>

<h3 id="accessing-the-api-from-a-pod">Accessing the API from a Pod</h3>

<p>When accessing the API from a pod, locating and authenticating
to the api server are somewhat different.</p>

<p>The recommended way to locate the apiserver within the pod is with
the <code class="highlighter-rouge">kubernetes</code> DNS name, which resolves to a Service IP which in turn
will be routed to an apiserver.</p>

<p>The recommended way to authenticate to the apiserver is with a
<a href="/docs/user-guide/service-accounts">service account</a> credential.  By kube-system, a pod
is associated with a service account, and a credential (token) for that
service account is placed into the filesystem tree of each container in that pod,
at <code class="highlighter-rouge">/var/run/secrets/kubernetes.io/serviceaccount/token</code>.</p>

<p>If available, a certificate bundle is placed into the filesystem tree of each
container at <code class="highlighter-rouge">/var/run/secrets/kubernetes.io/serviceaccount/ca.crt</code>, and should be
used to verify the serving certificate of the apiserver.</p>

<p>Finally, the default namespace to be used for namespaced API operations is placed in a file
at <code class="highlighter-rouge">/var/run/secrets/kubernetes.io/serviceaccount/namespace</code> in each container.</p>

<p>From within a pod the recommended ways to connect to API are:</p>

<ul>
  <li>run a kubectl proxy as one of the containers in the pod, or as a background
process within a container.  This proxies the
Kubernetes API to the localhost interface of the pod, so that other processes
in any container of the pod can access it.  See this <a href="https://github.com/kubernetes/kubernetes/tree/master/examples/kubectl-container/">example of using kubectl proxy
in a pod</a>.</li>
  <li>use the Go client library, and create a client using the <code class="highlighter-rouge">client.NewInCluster()</code> factory.
This handles locating and authenticating to the apiserver.</li>
</ul>

<p>In each case, the credentials of the pod are used to communicate securely with the apiserver.</p>

<h2 id="accessing-services-running-on-the-cluster">Accessing services running on the cluster</h2>

<p>The previous section was about connecting the Kubernetes API server.  This section is about
connecting to other services running on Kubernetes cluster.  In Kubernetes, the
<a href="/docs/admin/node">nodes</a>, <a href="/docs/user-guide/pods">pods</a> and <a href="/docs/user-guide/services">services</a> all have
their own IPs.  In many cases, the node IPs, pod IPs, and some service IPs on a cluster will not be
routable, so they will not be reachable from a machine outside the cluster,
such as your desktop machine.</p>

<h3 id="ways-to-connect">Ways to connect</h3>

<p>You have several options for connecting to nodes, pods and services from outside the cluster:</p>

<ul>
  <li>Access services through public IPs.
    <ul>
      <li>Use a service with type <code class="highlighter-rouge">NodePort</code> or <code class="highlighter-rouge">LoadBalancer</code> to make the service reachable outside
the cluster.  See the <a href="/docs/user-guide/services">services</a> and
<a href="/docs/user-guide/kubectl/kubectl_expose">kubectl expose</a> documentation.</li>
      <li>Depending on your cluster environment, this may just expose the service to your corporate network,
or it may expose it to the internet.  Think about whether the service being exposed is secure.
Does it do its own authentication?</li>
      <li>Place pods behind services.  To access one specific pod from a set of replicas, such as for debugging,
place a unique label on the pod it and create a new service which selects this label.</li>
      <li>In most cases, it should not be necessary for application developer to directly access
nodes via their nodeIPs.</li>
    </ul>
  </li>
  <li>Access services, nodes, or pods using the Proxy Verb.
    <ul>
      <li>Does apiserver authentication and authorization prior to accessing the remote service.
Use this if the services are not secure enough to expose to the internet, or to gain
access to ports on the node IP, or for debugging.</li>
      <li>Proxies may cause problems for some web applications.</li>
      <li>Only works for HTTP/HTTPS.</li>
      <li>Described <a href="#manually-constructing-apiserver-proxy-urls">here</a>.</li>
    </ul>
  </li>
  <li>Access from a node or pod in the cluster.
    <ul>
      <li>Run a pod, and then connect to a shell in it using <a href="/docs/user-guide/kubectl/kubectl_exec">kubectl exec</a>.
Connect to other nodes, pods, and services from that shell.</li>
      <li>Some clusters may allow you to ssh to a node in the cluster.  From there you may be able to
access cluster services.  This is a non-standard method, and will work on some clusters but
not others.  Browsers and other tools may or may not be installed.  Cluster DNS may not work.</li>
    </ul>
  </li>
</ul>

<h3 id="discovering-builtin-services">Discovering builtin services</h3>

<p>Typically, there are several services which are started on a cluster by kube-system. Get a list of these
with the <code class="highlighter-rouge">kubectl cluster-info</code> command:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>kubectl cluster-info

  Kubernetes master is running at https://104.197.5.247
  elasticsearch-logging is running at https://104.197.5.247/api/v1/proxy/namespaces/kube-system/services/elasticsearch-logging
  kibana-logging is running at https://104.197.5.247/api/v1/proxy/namespaces/kube-system/services/kibana-logging
  kube-dns is running at https://104.197.5.247/api/v1/proxy/namespaces/kube-system/services/kube-dns
  grafana is running at https://104.197.5.247/api/v1/proxy/namespaces/kube-system/services/monitoring-grafana
  heapster is running at https://104.197.5.247/api/v1/proxy/namespaces/kube-system/services/monitoring-heapster
</code></pre>
</div>

<p>This shows the proxy-verb URL for accessing each service.
For example, this cluster has cluster-level logging enabled (using Elasticsearch), which can be reached
at <code class="highlighter-rouge">https://104.197.5.247/api/v1/proxy/namespaces/kube-system/services/elasticsearch-logging/</code> if suitable credentials are passed, or through a kubectl proxy at, for example:
<code class="highlighter-rouge">http://localhost:8080/api/v1/proxy/namespaces/kube-system/services/elasticsearch-logging/</code>.
(See <a href="#accessing-the-cluster-api">above</a> for how to pass credentials or use kubectl proxy.)</p>

<h4 id="manually-constructing-apiserver-proxy-urls">Manually constructing apiserver proxy URLs</h4>

<p>As mentioned above, you use the <code class="highlighter-rouge">kubectl cluster-info</code> command to retrieve the service’s proxy URL. To create proxy URLs that include service endpoints, suffixes, and parameters, you simply append to the service’s proxy URL:
<code class="highlighter-rouge">http://</code><em><code class="highlighter-rouge">kubernetes_master_address</code></em><code class="highlighter-rouge">/api/v1/proxy/namespaces/</code><em><code class="highlighter-rouge">namespace_name</code></em><code class="highlighter-rouge">/services/</code><em><code class="highlighter-rouge">service_name[:port_name]</code></em></p>

<p>If you haven’t specified a name for your port, you don’t have to specify <em>port_name</em> in the URL</p>

<h5 id="examples">Examples</h5>

<ul>
  <li>To access the Elasticsearch service endpoint <code class="highlighter-rouge">_search?q=user:kimchy</code>, you would use:   <code class="highlighter-rouge">http://104.197.5.247/api/v1/proxy/namespaces/kube-system/services/elasticsearch-logging/_search?q=user:kimchy</code></li>
  <li>To access the Elasticsearch cluster health information <code class="highlighter-rouge">_cluster/health?pretty=true</code>, you would use:   <code class="highlighter-rouge">https://104.197.5.247/api/v1/proxy/namespaces/kube-system/services/elasticsearch-logging/_cluster/health?pretty=true</code></li>
</ul>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
	 </span><span class="nt">"cluster_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"kubernetes_logging"</span><span class="p">,</span><span class="w">
	 </span><span class="nt">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"yellow"</span><span class="p">,</span><span class="w">
	 </span><span class="nt">"timed_out"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
	 </span><span class="nt">"number_of_nodes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
	 </span><span class="nt">"number_of_data_nodes"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
	 </span><span class="nt">"active_primary_shards"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
	 </span><span class="nt">"active_shards"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
	 </span><span class="nt">"relocating_shards"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
	 </span><span class="nt">"initializing_shards"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
	 </span><span class="nt">"unassigned_shards"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="using-web-browsers-to-access-services-running-on-the-cluster">Using web browsers to access services running on the cluster</h4>

<p>You may be able to put an apiserver proxy url into the address bar of a browser. However:</p>

<ul>
  <li>Web browsers cannot usually pass tokens, so you may need to use basic (password) auth.  Apiserver can be configured to accept basic auth,
but your cluster may not be configured to accept basic auth.</li>
  <li>Some web apps may not work, particularly those with client side javascript that construct urls in a
way that is unaware of the proxy path prefix.</li>
</ul>

<h2 id="requesting-redirects">Requesting redirects</h2>

<p>The redirect capabilities have been deprecated and removed.  Please use a proxy (see below) instead.</p>

<h2 id="so-many-proxies">So Many Proxies</h2>

<p>There are several different proxies you may encounter when using Kubernetes:</p>

<ol>
  <li>The <a href="#directly-accessing-the-rest-api">kubectl proxy</a>:
    - runs on a user’s desktop or in a pod
    - proxies from a localhost address to the Kubernetes apiserver
    - client to proxy uses HTTP
    - proxy to apiserver uses HTTPS
    - locates apiserver
    - adds authentication headers</li>
  <li>The <a href="#discovering-builtin-services">apiserver proxy</a>:
    - is a bastion built into the apiserver
    - connects a user outside of the cluster to cluster IPs which otherwise might not be reachable
    - runs in the apiserver processes
    - client to proxy uses HTTPS (or http if apiserver so configured)
    - proxy to target may use HTTP or HTTPS as chosen by proxy using available information
    - can be used to reach a Node, Pod, or Service
    - does load balancing when used to reach a Service</li>
  <li>The <a href="/docs/user-guide/services/#ips-and-vips">kube proxy</a>:
    - runs on each node
    - proxies UDP and TCP
    - does not understand HTTP
    - provides load balancing
    - is just used to reach services</li>
  <li>A Proxy/Load-balancer in front of apiserver(s):
    - existence and implementation varies from cluster to cluster (e.g. nginx)
    - sits between all clients and one or more apiservers
    - acts as load balancer if there are several apiservers.</li>
  <li>Cloud Load Balancers on external services:
    - are provided by some cloud providers (e.g. AWS ELB, Google Cloud Load Balancer)
    - are created automatically when the Kubernetes service has type <code class="highlighter-rouge">LoadBalancer</code>
    - use UDP/TCP only
    - implementation varies by cloud provider.</li>
</ol>

<p>Kubernetes users will typically not need to worry about anything other than the first two types.  The cluster admin
will typically ensure that the latter types are setup correctly.</p>

        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/user-guide/accessing-the-cluster.md?pixel" alt="Analytics" /></a>
        <div id="pd_rating_holder_8345992"></div>
		<script type="text/javascript">
	        PDRTJS_settings_8345992 = {
		        "id" : "8345992",
		        "unique_id" : "/docs/user-guide/accessing-the-cluster/",
		        "title" : "Accessing Clusters",
		        "permalink" : "http://kubernetes.github.io/docs/user-guide/accessing-the-cluster/"
	        };
	        (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
	</div>
</section>

<footer>
	<main class="light-text">
		<nav>
			<a href="/docs/hellonode/">Get Started</a>
			<a href="/docs/">Documentation</a>
			<a href="http://blog.kubernetes.io/">Blog</a>
			<a href="/community/">Community</a>
		</nav>
		<div class="social">
			<div>
				<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
				<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
				<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
			</div>
			<div>
				<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
				<a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
				<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
			</div>
			<div>
				<span>I wish this page</span>
				<input type="text" id="wishField" name="wishField" placeholder="enter your wish">
			</div>
		</div>
		<div id="miceType" class="center">&copy; 2016 Kubernetes</div>
	</main>
</footer>


<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
	.cse .gsc-control-cse, .gsc-control-cse, {
		padding: 0;
	}
	.gsc-control-cse table, .gsc-control-cse-en table {
		margin:0px !important;
	}

	.gsc-above-wrapper-area {
		border-bottom: 0;
	}
</style>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36037335-10', 'auto');
  ga('send', 'pageview');
</script>
<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
<!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->
</body>
</html>
