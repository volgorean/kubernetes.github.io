

<!Doctype html>
<html id="docs" class="Support">


<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="canonical" href="http://kubernetes.io/docs/user-guide/debugging-pods-and-replication-controllers/" />
	<link rel="shortcut icon" type="image/png" href="/images/favicon.png">
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href='https://fonts.googleapis.com/css?family=Roboto+Mono' type='text/css'>
	<link rel="stylesheet" href="/css/styles.css"/>
        <link rel="stylesheet" href="/css/jquery-ui.min.css">
        <link rel="stylesheet" href="/css/sweetalert.css">
	<script src="/js/jquery-2.2.0.min.js"></script>
        <script src="/js/jquery-ui.min.js"></script>
	<script src="/js/script.js"></script>
        <script src="/js/sweetalert.min.js"></script>
	<title>Kubernetes - Debugging Pods and Replication Controllers</title>
</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>
<header>
	<a href="/" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="/docs/" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a>
		<a href="/docs/hellonode/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
		<button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="/docs/hellonode/">Get Started</a></h3>
				<p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
			</div>
			<div class="nav-box">
				<h3><a href="/docs/">Documentation</a></h3>
				<p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
			</div>
			<div class="nav-box">
				<h3><a href="/community/">Community</a></h3>
				<p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
			</div>
			<div class="nav-box">
				<h3><a href="http://blog.kubernetes.io">Blog</a></h3>
				<p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
			</div>
		</main>
		<main data-auto-burger="primary">
			<div class="left">
				<h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
				<a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
			</div>

			<div class="right">
				<h5 class="github-invite">Explore the community</h5>
				<div class="social">
					<a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
					<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
					<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
					<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
					<a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
					<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
				</div>
			</div>
			<div class="clear" style="clear: both"></div>
		</main>
	</nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
	<h1>Support</h1>
	<h5>Troubleshooting resources, frequently asked questions, and community support channels.</h5>
	<div id="vendorStrip" class="light-text">
		<ul>
			<li><a href="/docs/" >GUIDES</a></li>
			<li><a href="/docs/reference" >REFERENCE</a></li>
			<li><a href="/docs/samples" >SAMPLES</a></li>
			<li><a href="/docs/troubleshooting/" class="YAH">SUPPORT</a></li>
		</ul>
		<div id="searchBox">
			<input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
		</div>
	</div>
</section>

<section id="encyclopedia">
	<div id="docsToc">
        <div class="pi-accordion">
        
    <a class="item" data-title="Support" href="/docs/troubleshooting/"></a>
<div class="item" data-title="Troubleshooting">
  <div class="container">
    <a class="item" data-title="Debugging Pods and Replication Controllers" href="/docs/user-guide/debugging-pods-and-replication-controllers/"></a>
    <a class="item" data-title="Application Introspection and Debugging" href="/docs/user-guide/introspection-and-debugging/"></a>
    <a class="item" data-title="Retrieving Logs" href="/docs/user-guide/logging/"></a>
    <a class="item" data-title="Troubleshooting Applications" href="/docs/user-guide/application-troubleshooting/"></a>
    <a class="item" data-title="Troubleshooting Clusters" href="/docs/admin/cluster-troubleshooting/"></a>
    <a class="item" data-title="Debugging Services" href="/docs/user-guide/debugging-services/"></a>
  </div>
</div>
<div class="item" data-title="Frequently Asked Questions">
  <div class="container">
    <a class="item" data-title="User FAQ" href="https://github.com/kubernetes/kubernetes/wiki/User-FAQ/" target='_blank'></a>
    <a class="item" data-title="Debugging FAQ" href="https://github.com/kubernetes/kubernetes/wiki/Debugging-FAQ/" target='_blank'></a>
    <a class="item" data-title="Services FAQ" href="https://github.com/kubernetes/kubernetes/wiki/Services-FAQ/" target='_blank'></a>
  </div>
</div>
<div class="item" data-title="Other Resources">
  <div class="container">
    <a class="item" data-title="Kubernetes Issue Tracker on GitHub" href="https://github.com/kubernetes/kubernetes/issues/" target='_blank'></a>
    <a class="item" data-title="Report a Security Vulnerability" href="/docs/reporting-security-issues/"></a>
    <a class="item" data-title="Release Notes" href="https://github.com/kubernetes/kubernetes/releases/" target='_blank'></a>
    <a class="item" data-title="Release Roadmap" href="https://github.com/kubernetes/kubernetes/milestones/" target='_blank'></a>
    <a class="item" data-title="Contributing to Kubernetes Documentation" href="/editdocs/"></a>
    <a class="item" data-title="New Template Instructions" href="/docs/templatedemos/"></a>
  </div>
</div>
        </div> <!-- /pi-accordion -->
		<button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
	</div> <!-- /docsToc -->
	<div id="docsContent">
        <p><a href="/editdocs#docs/user-guide/debugging-pods-and-replication-controllers.md" id="editPageButton">Edit This Page</a></p>
    	<h1>Debugging Pods and Replication Controllers</h1>
		<ul id="markdown-toc">
  <li><a href="#debugging-pods" id="markdown-toc-debugging-pods">Debugging pods</a>    <ul>
      <li><a href="#my-pod-stays-pending" id="markdown-toc-my-pod-stays-pending">My pod stays pending</a>        <ul>
          <li><a href="#insufficient-resources" id="markdown-toc-insufficient-resources">Insufficient resources</a></li>
          <li><a href="#using-hostport" id="markdown-toc-using-hostport">Using hostPort</a></li>
        </ul>
      </li>
      <li><a href="#my-pod-stays-waiting" id="markdown-toc-my-pod-stays-waiting">My pod stays waiting</a></li>
      <li><a href="#my-pod-is-crashing-or-otherwise-unhealthy" id="markdown-toc-my-pod-is-crashing-or-otherwise-unhealthy">My pod is crashing or otherwise unhealthy</a></li>
    </ul>
  </li>
  <li><a href="#debugging-replication-controllers" id="markdown-toc-debugging-replication-controllers">Debugging Replication Controllers</a></li>
</ul>

<h2 id="debugging-pods">Debugging pods</h2>

<p>The first step in debugging a pod is taking a look at it. Check the current
state of the pod and recent events with the following command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ kubectl describe pods ${POD_NAME}
</code></pre>
</div>

<p>Look at the state of the containers in the pod. Are they all <code class="highlighter-rouge">Running</code>?  Have
there been recent restarts?</p>

<p>Continue debugging depending on the state of the pods.</p>

<h3 id="my-pod-stays-pending">My pod stays pending</h3>

<p>If a pod is stuck in <code class="highlighter-rouge">Pending</code> it means that it can not be scheduled onto a
node. Generally this is because there are insufficient resources of one type or
another that prevent scheduling. Look at the output of the <code class="highlighter-rouge">kubectl describe
...</code> command above. There should be messages from the scheduler about why it
can not schedule your pod. Reasons include:</p>

<h4 id="insufficient-resources">Insufficient resources</h4>

<p>You may have exhausted the supply of CPU or Memory in your cluster. In this
case you can try several things:</p>

<ul>
  <li>
    <p><a href="/docs/admin/cluster-management/#resizing-a-cluster">Add more nodes</a> to the cluster.</p>
  </li>
  <li>
    <p><a href="/docs/user-guide/pods/single-container/#deleting_a_pod">Terminate unneeded pods</a>
to make room for pending pods.</p>
  </li>
  <li>
    <p>Check that the pod is not larger than your nodes. For example, if all
nodes have a capacity of <code class="highlighter-rouge">cpu:1</code>, then a pod with a limit of <code class="highlighter-rouge">cpu: 1.1</code>
will never be scheduled.</p>

    <p>You can check node capacities with the <code class="highlighter-rouge">kubectl get nodes -o &lt;format&gt;</code>
  command. Here are some example command lines that extract just the necessary
  information:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>  kubectl get nodes -o yaml | grep '\sname\|cpu\|memory'
  kubectl get nodes -o json | jq '.items[] | {name: .metadata.name, cap: .status.capacity}'
</code></pre>
    </div>

    <p>The <a href="/docs/admin/resourcequota/">resource quota</a>
feature can be configured to limit the total amount of
resources that can be consumed. If used in conjunction with namespaces, it can
prevent one team from hogging all the resources.</p>
  </li>
</ul>

<h4 id="using-hostport">Using hostPort</h4>

<p>When you bind a pod to a <code class="highlighter-rouge">hostPort</code> there are a limited number of places that
the pod can be scheduled. In most cases, <code class="highlighter-rouge">hostPort</code> is unnecessary; try using a
service object to expose your pod. If you do require <code class="highlighter-rouge">hostPort</code> then you can
only schedule as many pods as there are nodes in your container cluster.</p>

<h3 id="my-pod-stays-waiting">My pod stays waiting</h3>

<p>If a pod is stuck in the <code class="highlighter-rouge">Waiting</code> state, then it has been scheduled to a
worker node, but it can’t run on that machine. Again, the information from
<code class="highlighter-rouge">kubectl describe ...</code> should be informative. The most common cause of
<code class="highlighter-rouge">Waiting</code> pods is a failure to pull the image. There are three things to check:</p>

<ul>
  <li>Make sure that you have the name of the image correct.</li>
  <li>Have you pushed the image to the repository?</li>
  <li>Run a manual <code class="highlighter-rouge">docker pull &lt;image&gt;</code> on your machine to see if the image can be
pulled.</li>
</ul>

<h3 id="my-pod-is-crashing-or-otherwise-unhealthy">My pod is crashing or otherwise unhealthy</h3>

<p>First, take a look at the logs of the current container:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ kubectl logs ${POD_NAME} ${CONTAINER_NAME}
</code></pre>
</div>

<p>If your container has previously crashed, you can access the previous
container’s crash log with:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ kubectl logs --previous ${POD_NAME} ${CONTAINER_NAME}
</code></pre>
</div>

<p>Alternately, you can run commands inside that container with <code class="highlighter-rouge">exec</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ kubectl exec ${POD_NAME} -c ${CONTAINER_NAME} -- ${CMD} ${ARG1} ${ARG2} ... ${ARGN}
</code></pre>
</div>

<p>Note that <code class="highlighter-rouge">-c ${CONTAINER_NAME}</code> is optional and can be omitted for pods that
only contain a single container.</p>

<p>As an example, to look at the logs from a running Cassandra pod, you might run:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ kubectl exec cassandra -- cat /var/log/cassandra/system.log
</code></pre>
</div>

<p>If none of these approaches work, you can find the host machine that the pod is
running on and SSH into that host.</p>

<h2 id="debugging-replication-controllers">Debugging Replication Controllers</h2>

<p>Replication controllers are fairly straightforward. They can either create pods
or they can’t. If they can’t create pods, then please refer to the
<a href="#debugging_pods">instructions above</a> to debug your pods.</p>

<p>You can also use <code class="highlighter-rouge">kubectl describe rc ${CONTROLLER_NAME}</code> to inspect events
related to the replication controller.</p>


        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/user-guide/debugging-pods-and-replication-controllers.md?pixel" alt="Analytics" /></a>
        <div id="pd_rating_holder_8345992"></div>
		<script type="text/javascript">
	        PDRTJS_settings_8345992 = {
		        "id" : "8345992",
		        "unique_id" : "/docs/user-guide/debugging-pods-and-replication-controllers/",
		        "title" : "Debugging Pods and Replication Controllers",
		        "permalink" : "http://kubernetes.github.io/docs/user-guide/debugging-pods-and-replication-controllers/"
	        };
	        (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
	</div>
</section>

<footer>
	<main class="light-text">
		<nav>
			<a href="/docs/hellonode/">Get Started</a>
			<a href="/docs/">Documentation</a>
			<a href="http://blog.kubernetes.io/">Blog</a>
			<a href="/community/">Community</a>
		</nav>
		<div class="social">
			<div>
				<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
				<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
				<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
			</div>
			<div>
				<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
				<a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
				<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
			</div>
			<div>
				<span>I wish this page</span>
				<input type="text" id="wishField" name="wishField" placeholder="enter your wish">
			</div>
		</div>
		<div id="miceType" class="center">&copy; 2016 Kubernetes</div>
	</main>
</footer>


<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
	.cse .gsc-control-cse, .gsc-control-cse, {
		padding: 0;
	}
	.gsc-control-cse table, .gsc-control-cse-en table {
		margin:0px !important;
	}

	.gsc-above-wrapper-area {
		border-bottom: 0;
	}
</style>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36037335-10', 'auto');
  ga('send', 'pageview');
</script>
<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
<!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->
</body>
</html>
